{"componentChunkName":"component---themes-advanced-src-templates-post-query-ts","path":"/vite-plugin-qiankun-x","result":{"data":{"mdx":{"body":"var _excluded = [\"components\"];\nfunction _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nfunction _objectWithoutProperties(e, t) { if (null == e) return {}; var o, r, i = _objectWithoutPropertiesLoose(e, t); if (Object.getOwnPropertySymbols) { var n = Object.getOwnPropertySymbols(e); for (r = 0; r < n.length; r++) o = n[r], t.indexOf(o) >= 0 || {}.propertyIsEnumerable.call(e, o) && (i[o] = e[o]); } return i; }\nfunction _objectWithoutPropertiesLoose(r, e) { if (null == r) return {}; var t = {}; for (var n in r) if ({}.hasOwnProperty.call(r, n)) { if (e.indexOf(n) >= 0) continue; t[n] = r[n]; } return t; }\n/* @jsxRuntime classic */\n/* @jsx mdx */\n\nvar _frontmatter = {\n  \"title\": \"vite-plugin-qiankun-x\",\n  \"cover\": \"images/default_img5.jpg\",\n  \"coverAlt\": \"封面\",\n  \"description\": \"让qiankun框架支持vite的es特性的框架\",\n  \"datePublished\": \"2022-09-02 11:38:19\",\n  \"dateModified\": \"2022-09-02 11:38:19\",\n  \"category\": \"框架工具\",\n  \"tags\": [\"前端\", \"库\", \"微前端\", \"Vite\", \"开源\"]\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n    props = _objectWithoutProperties(_ref, _excluded);\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"vite-plugin-qiankun-x\\u662F\\u7528\\u4E8Evite\\u6784\\u5EFA\\u7684\\u5FAE\\u5E94\\u7528\\uFF0C\\u60F3\\u8981\\u63A5\\u5165qiankun\\u4F53\\u7CFB\\u65F6\\uFF0C\\u9700\\u8981\\u5F15\\u5165\\u8BE5\\u63D2\\u4EF6\\u3002\"), mdx(\"hr\", null), mdx(\"h3\", null, \"\\u4ED3\\u5E93\\u5730\\u5740\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"vite-plugin-qiankun-x\"), \"\\uFF1A\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/missmess/vite-plugin-qiankun-x\",\n    \"target\": \"_blank\",\n    \"rel\": \"nofollow noopener noreferrer\"\n  }, \"https://github.com/missmess/vite-plugin-qiankun-x\")), mdx(\"p\", null, \"vite-plugin-qiankun\\uFF1A\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/missmess/vite-plugin-qiankun/tree/feature/support-prod-publicpath\",\n    \"target\": \"_blank\",\n    \"rel\": \"nofollow noopener noreferrer\"\n  }, \"https://github.com/missmess/vite-plugin-qiankun/tree/feature/support-prod-publicpath\")), mdx(\"h3\", null, \"\\u4E3A\\u4EC0\\u4E48\\u9700\\u8981\\u8FD9\\u4E2A\\u63D2\\u4EF6\\uFF1F\"), mdx(\"p\", null, \"qiankun\\u52A0\\u8F7Dvite\\u5FAE\\u5E94\\u7528\\u65F6\\u3002\\u5F00\\u53D1\\u6A21\\u5F0F\\u4E0B\\uFF0CESM\\u65E0\\u6CD5\\u5728qiankun\\u73AF\\u5883\\u4E0B\\u8FD0\\u884C\\uFF0C\\u4E5F\\u65E0\\u6CD5\\u83B7\\u53D6\\u5230\\u751F\\u547D\\u5468\\u671F\\u94A9\\u5B50\\u3002\"), mdx(\"p\", null, \"\\u8FD9\\u4E2A\\u63D2\\u4EF6\\u901A\\u8FC7\\u4FEE\\u6539html entry\\u7684\\u4EE3\\u7801\\u6765hack\\u751F\\u547D\\u5468\\u671F\\u51FD\\u6570\\u3002\"), mdx(\"p\", null, \"\\u6B64\\u5916\\u7531\\u4E8EVite\\u4E0D\\u50CF\", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"webpack\"), \"\\u90A3\\u6837\\u652F\\u6301\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://webpack.js.org/guides/public-path/#on-the-fly\",\n    \"target\": \"_blank\",\n    \"rel\": \"nofollow noopener noreferrer\"\n  }, \"runtime publicPath\\u6280\\u672F\"), \"\\uFF0C\\u8FD9\\u4F1A\\u5BFC\\u81F4\\u5FAE\\u5E94\\u7528\\u65E0\\u6CD5\\u5B9E\\u73B0\\u591A\\u73AF\\u5883\\u90E8\\u7F72\\u3002\"), mdx(\"h3\", null, \"\\u539F\\u7406\"), mdx(\"p\", null, \"qiankun\\u52A0\\u8F7Dvite\\u5FAE\\u5E94\\u7528\\uFF0Chack\\u4EE3\\u7406\\u65B9\\u6CD5window.proxy\", \"[vite-app-name]\", \".mount\\u6307\\u5411\\u4EE3\\u7801\\u4E2D\\u914D\\u7F6E\\u7684\", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"renderWithQiankun\"), \"\\u7684\\u53C2\\u6570\\u5BF9\\u8C61\\u3002\\u8FD9\\u6837qiankun\\u5C31\\u80FD\\u6B63\\u5E38\\u8C03\\u7528\\u5404\\u4E2A\\u751F\\u547D\\u5468\\u671F\\u51FD\\u6570\\u3002\"), mdx(\"p\", null, \"\\u540C\\u65F6\\uFF0Cvite\\u5F00\\u53D1\\u73AF\\u5883\\u4E0B\\uFF0C\\u52A0\\u8F7Dqiankun\\u5FAE\\u5E94\\u7528\\u7684esm\\u6A21\\u5757\\u65F6\\uFF0C\\u9700\\u8981\\u4FEE\\u6539\\u8DEF\\u5F84\\u8FFD\\u52A0\\u524D\\u7F00\\u3002\\n\\u6BD4\\u5982\", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"./main.ts\"), \"\\uFF0C\\u9700\\u8981\\u6539\\u4E3A\", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"window.__INJECTED_PUBLIC_PATH_BY_QIANKUN__ + '/main.ts'\"), \"\\u3002\"), mdx(\"p\", null, \"\\u8FD9\\u6837\\u7684\\u8BDD\\uFF0Cqiankun\\u5C31\\u80FD\\u6B63\\u5E38\\u52A0\\u8F7Des\\u6A21\\u5757\\u5165\\u53E3\\u4EE3\\u7801\\u3002\"), mdx(\"h3\", null, \"\\u533A\\u522B\"), mdx(\"p\", null, \"vite-plugin-qiankun\\u662Ffork\\u8FC7\\u6765\\u7684\\uFF0C\\u5728\\u91CC\\u9762\\u6539\\u4E86\\u4E00\\u4E9B\\u4EE3\\u7801\\u3002\\u4E3B\\u8981\\u662F\\u4FEE\\u590Dbug\\u548C\\u652F\\u6301\\u591A\\u73AF\\u5883\\u90E8\\u7F72\\u3002\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"vite-plugin-qiankun-x\"), \"\\u662F\\u91CD\\u6784\\u7248\\u672C\\u3002\\u7531\\u4E8E\\u8001\\u6E90\\u7801\\u8FD8\\u662F\\u6BD4\\u8F83\\u96BE\\u7406\\u89E3\\uFF0C\\u5E76\\u4E14api\\u8BBE\\u8BA1\\u6709\\u4E9B\\u9EBB\\u70E6\\u3002\\u6240\\u4EE5\\u5C31\\u505A\\u4E86\\u8FD9\\u4E2A\\u91CD\\u6784\\u3002\"));\n}\n;\nMDXContent.isMDXComponent = true;","timeToRead":1,"excerpt":"vite-plugin-qiankun-x是用于vite构建的微应用，想要接入qiankun体系时，需要引入该插件。 仓库地址 vite-plugin-qiankun-x ： https://github.com/missmess/vite-plugin-qiankun-x…","frontmatter":{"title":"vite-plugin-qiankun-x","description":"让qiankun框架支持vite的es特性的框架","cover":{"publicURL":"/leon-blog/static/c1ff24cf1a57db96025bbcec71e9035b/default_img5.jpg","childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAEEAgP/xAAWAQEBAQAAAAAAAAAAAAAAAAADAAT/2gAMAwEAAhADEAAAAd0w9R1IRF//xAAaEAACAwEBAAAAAAAAAAAAAAAAAQIDERMh/9oACAEBAAEFAvE+2KVluoiNs//EABgRAAIDAAAAAAAAAAAAAAAAAAACESEx/9oACAEDAQE/AWyyT//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABoQAAICAwAAAAAAAAAAAAAAAAACETEBEDL/2gAIAQEABj8CuSEXBy27P//EABwQAQABBQEBAAAAAAAAAAAAAAEAESExQXGBkf/aAAgBAQABPyEtFMbUgvECbB4MyezaVWX2f//aAAwDAQACAAMAAAAQQ+//xAAXEQADAQAAAAAAAAAAAAAAAAAAAUEh/9oACAEDAQE/EGToZh//xAAWEQEBAQAAAAAAAAAAAAAAAAABEBH/2gAIAQIBAT8QB2f/xAAdEAEBAAIBBQAAAAAAAAAAAAABEQAhQXGBkbHx/9oACAEBAAE/EKpATAJLVfGA7gciD15wrtxdj1jSS/GNm3GF1Huz/9k="},"backgroundColor":"transparent","images":{"fallback":{"src":"/leon-blog/static/c1ff24cf1a57db96025bbcec71e9035b/04adf/default_img5.jpg","srcSet":"/leon-blog/static/c1ff24cf1a57db96025bbcec71e9035b/a10bb/default_img5.jpg 250w,\n/leon-blog/static/c1ff24cf1a57db96025bbcec71e9035b/0d420/default_img5.jpg 500w,\n/leon-blog/static/c1ff24cf1a57db96025bbcec71e9035b/04adf/default_img5.jpg 1000w","sizes":"(min-width: 1000px) 1000px, 100vw"},"sources":[{"srcSet":"/leon-blog/static/c1ff24cf1a57db96025bbcec71e9035b/298bc/default_img5.avif 250w,\n/leon-blog/static/c1ff24cf1a57db96025bbcec71e9035b/7c90d/default_img5.avif 500w,\n/leon-blog/static/c1ff24cf1a57db96025bbcec71e9035b/f3bb3/default_img5.avif 1000w","type":"image/avif","sizes":"(min-width: 1000px) 1000px, 100vw"},{"srcSet":"/leon-blog/static/c1ff24cf1a57db96025bbcec71e9035b/f836f/default_img5.webp 250w,\n/leon-blog/static/c1ff24cf1a57db96025bbcec71e9035b/97b84/default_img5.webp 500w,\n/leon-blog/static/c1ff24cf1a57db96025bbcec71e9035b/8963c/default_img5.webp 1000w","type":"image/webp","sizes":"(min-width: 1000px) 1000px, 100vw"}]},"width":1000,"height":500}}},"coverAlt":"封面","datePublished":"2022-09-02 11:38:19","dateModified":"2022-09-02 11:38:19","category":"框架工具","tags":["前端","库","微前端","Vite","开源"]},"fields":{"slug":"/vite-plugin-qiankun-x","route":"/vite-plugin-qiankun-x","pathName":"/leon-blog/vite-plugin-qiankun-x","url":"https://missmess.github.io/leon-blog/vite-plugin-qiankun-x"},"internal":{"content":"---\ntitle: \"vite-plugin-qiankun-x\"\ncover: images/default_img5.jpg\ncoverAlt: \"封面\"\ndescription: \"让qiankun框架支持vite的es特性的框架\"\ndatePublished: \"2022-09-02 11:38:19\"\ndateModified: \"2022-09-02 11:38:19\"\ncategory: \"框架工具\"\ntags:\n  - 前端\n  - 库\n  - 微前端\n  - Vite\n  - 开源\n---\n\nvite-plugin-qiankun-x是用于vite构建的微应用，想要接入qiankun体系时，需要引入该插件。\n\n---\n\n### 仓库地址\n\n**vite-plugin-qiankun-x**：https://github.com/missmess/vite-plugin-qiankun-x\n\nvite-plugin-qiankun：https://github.com/missmess/vite-plugin-qiankun/tree/feature/support-prod-publicpath\n\n### 为什么需要这个插件？\n\nqiankun加载vite微应用时。开发模式下，ESM无法在qiankun环境下运行，也无法获取到生命周期钩子。\n\n这个插件通过修改html entry的代码来hack生命周期函数。\n\n此外由于Vite不像`webpack`那样支持[runtime publicPath技术](https://webpack.js.org/guides/public-path/#on-the-fly)，这会导致微应用无法实现多环境部署。\n\n### 原理\n\nqiankun加载vite微应用，hack代理方法window.proxy[vite-app-name].mount指向代码中配置的`renderWithQiankun`的参数对象。这样qiankun就能正常调用各个生命周期函数。\n\n同时，vite开发环境下，加载qiankun微应用的esm模块时，需要修改路径追加前缀。\n比如```./main.ts```，需要改为```window.__INJECTED_PUBLIC_PATH_BY_QIANKUN__ + '/main.ts'```。\n\n这样的话，qiankun就能正常加载es模块入口代码。\n\n### 区别\n\nvite-plugin-qiankun是fork过来的，在里面改了一些代码。主要是修复bug和支持多环境部署。\n\n**vite-plugin-qiankun-x**是重构版本。由于老源码还是比较难理解，并且api设计有些麻烦。所以就做了这个重构。\n"}}},"pageContext":{"slug":"/vite-plugin-qiankun-x","nexttitle":"灵境低代码平台","nextslug":"/灵境低代码平台","prevtitle":"【造轮子】Vue双端diff算法","prevslug":"/vue-demo-diff","relatedPosts":[{"title":"procomponents-template","description":"ProComponents封装的低代码脚手架","coverImg":{"layout":"constrained","placeholder":{"fallback":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAMBBAX/xAAWAQEBAQAAAAAAAAAAAAAAAAAAAQL/2gAMAwEAAhADEAAAAdKLBooaR//EABgQAAIDAAAAAAAAAAAAAAAAAAAiARIg/9oACAEBAAEFAnHItj//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAYEAACAwAAAAAAAAAAAAAAAAAAQhEgIf/aAAgBAQAGPwJRTYp//8QAGhAAAQUBAAAAAAAAAAAAAAAAAAERICHw4f/aAAgBAQABPyHVj4U4kP/aAAwDAQACAAMAAAAQMO//xAAWEQADAAAAAAAAAAAAAAAAAAAAARH/2gAIAQMBAT8QrKz/xAAVEQEBAAAAAAAAAAAAAAAAAAAAEf/aAAgBAgEBPxCI/8QAHBAAAgICAwAAAAAAAAAAAAAAAREAISAxQVGB/9oACAEBAAE/ECnYeIDlb8XaUFHdW1h//9k="},"backgroundColor":"transparent","images":{"fallback":{"src":"/leon-blog/static/b8db5f68157645c122f55f49912c1e2a/fff17/procomponents_cover.jpg","srcSet":"/leon-blog/static/b8db5f68157645c122f55f49912c1e2a/9fa5a/procomponents_cover.jpg 184w,\n/leon-blog/static/b8db5f68157645c122f55f49912c1e2a/63e75/procomponents_cover.jpg 368w,\n/leon-blog/static/b8db5f68157645c122f55f49912c1e2a/fff17/procomponents_cover.jpg 736w","sizes":"(min-width: 736px) 736px, 100vw"},"sources":[{"srcSet":"/leon-blog/static/b8db5f68157645c122f55f49912c1e2a/9d028/procomponents_cover.avif 184w,\n/leon-blog/static/b8db5f68157645c122f55f49912c1e2a/c6ee4/procomponents_cover.avif 368w,\n/leon-blog/static/b8db5f68157645c122f55f49912c1e2a/b4627/procomponents_cover.avif 736w","type":"image/avif","sizes":"(min-width: 736px) 736px, 100vw"},{"srcSet":"/leon-blog/static/b8db5f68157645c122f55f49912c1e2a/ef27d/procomponents_cover.webp 184w,\n/leon-blog/static/b8db5f68157645c122f55f49912c1e2a/4ae45/procomponents_cover.webp 368w,\n/leon-blog/static/b8db5f68157645c122f55f49912c1e2a/20e6b/procomponents_cover.webp 736w","type":"image/webp","sizes":"(min-width: 736px) 736px, 100vw"}]},"width":736,"height":368},"coverImageAlt":"封面","datePublished":"2021-12-02T10:50:54.000Z","dateModified":"2021-12-02T10:50:54.000Z","category":"框架工具","tags":["前端","React","脚手架","开源","低代码","Vite"],"excerpt":"使用ProComponents封装的带页面模版的低代码脚手架。方便 后台开发人员 或 不熟悉React开发语言的开发者 ，能自己轻松搭建常见后台的crud列表页及详情页。 gitee仓库： https://gitee.com/missmess/pro-components…","timeToRead":1,"slug":"/procomponents-template","route":"/procomponents-template","pathName":"/leon-blog/procomponents-template","url":"https://missmess.github.io/leon-blog/procomponents-template"},{"title":"vite-reactts-starter","description":"vite+react+ts+Antd+redux+eslint项目启动脚手架","coverImg":{"layout":"constrained","placeholder":{"fallback":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAIFBP/EABQBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAdFKdURBwf/EABwQAAEDBQAAAAAAAAAAAAAAAAACBBIBAxARM//aAAgBAQABBQJjTdqKSKRhxx//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAbEAABBAMAAAAAAAAAAAAAAAABACEykRARcf/aAAgBAQAGPwI7d1EUoike5//EABgQAQADAQAAAAAAAAAAAAAAAAEQQWHw/9oACAEBAAE/IReR3TJlLjyf/9oADAMBAAIAAwAAABAkL//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABYRAAMAAAAAAAAAAAAAAAAAAAEQMf/aAAgBAgEBPxA1f//EABsQAAEEAwAAAAAAAAAAAAAAABEAAdHxEKGx/9oACAEBAAE/EDU7YN3AKuQqRC3vGf/Z"},"backgroundColor":"transparent","images":{"fallback":{"src":"/leon-blog/static/f0c93c86aa0622d07abc2a465eb0949a/dba67/cover.jpg","srcSet":"/leon-blog/static/f0c93c86aa0622d07abc2a465eb0949a/891f5/cover.jpg 176w,\n/leon-blog/static/f0c93c86aa0622d07abc2a465eb0949a/19cc4/cover.jpg 352w,\n/leon-blog/static/f0c93c86aa0622d07abc2a465eb0949a/dba67/cover.jpg 704w,\n/leon-blog/static/f0c93c86aa0622d07abc2a465eb0949a/1f3b1/cover.jpg 1408w","sizes":"(min-width: 704px) 704px, 100vw"},"sources":[{"srcSet":"/leon-blog/static/f0c93c86aa0622d07abc2a465eb0949a/94818/cover.avif 176w,\n/leon-blog/static/f0c93c86aa0622d07abc2a465eb0949a/bd4f6/cover.avif 352w,\n/leon-blog/static/f0c93c86aa0622d07abc2a465eb0949a/2856f/cover.avif 704w,\n/leon-blog/static/f0c93c86aa0622d07abc2a465eb0949a/69a09/cover.avif 1408w","type":"image/avif","sizes":"(min-width: 704px) 704px, 100vw"},{"srcSet":"/leon-blog/static/f0c93c86aa0622d07abc2a465eb0949a/76df1/cover.webp 176w,\n/leon-blog/static/f0c93c86aa0622d07abc2a465eb0949a/d3e0a/cover.webp 352w,\n/leon-blog/static/f0c93c86aa0622d07abc2a465eb0949a/b4509/cover.webp 704w,\n/leon-blog/static/f0c93c86aa0622d07abc2a465eb0949a/816c4/cover.webp 1408w","type":"image/webp","sizes":"(min-width: 704px) 704px, 100vw"}]},"width":704,"height":368},"coverImageAlt":"脚手架模版","datePublished":"2021-10-10T10:27:09.000Z","dateModified":"2021-10-10T10:27:09.000Z","category":"框架工具","tags":["前端","脚手架","React","Antd","Vite","开源"],"excerpt":"Vite for React快速启动脚手架。 Vite + React + TypeScript + React Router + Redux Toolkit + Antd + Eslint + Prettier + axios + less Github仓库： https…","timeToRead":1,"slug":"/vite-reactts-starter","route":"/vite-reactts-starter","pathName":"/leon-blog/vite-reactts-starter","url":"https://missmess.github.io/leon-blog/vite-reactts-starter"}]}},"staticQueryHashes":["2792541146","2845918323"]}