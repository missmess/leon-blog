{"componentChunkName":"component---themes-advanced-src-templates-post-query-ts","path":"/react-ssr","result":{"data":{"mdx":{"body":"var _excluded = [\"components\"];\nfunction _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nfunction _objectWithoutProperties(e, t) { if (null == e) return {}; var o, r, i = _objectWithoutPropertiesLoose(e, t); if (Object.getOwnPropertySymbols) { var n = Object.getOwnPropertySymbols(e); for (r = 0; r < n.length; r++) o = n[r], t.indexOf(o) >= 0 || {}.propertyIsEnumerable.call(e, o) && (i[o] = e[o]); } return i; }\nfunction _objectWithoutPropertiesLoose(r, e) { if (null == r) return {}; var t = {}; for (var n in r) if ({}.hasOwnProperty.call(r, n)) { if (e.indexOf(n) >= 0) continue; t[n] = r[n]; } return t; }\n/* @jsxRuntime classic */\n/* @jsx mdx */\n\nvar _frontmatter = {\n  \"title\": \"谈一谈React18的SSR\",\n  \"cover\": \"../static/assets/react-ssr-cover.jpg\",\n  \"coverAlt\": \"封面\",\n  \"description\": \"介绍React18的SSR相关知识\",\n  \"datePublished\": \"2024-07-20 12:04:20\",\n  \"dateModified\": \"2024-07-20 12:04:20\",\n  \"slug\": \"react-ssr\",\n  \"category\": \"经验总结\",\n  \"tags\": [\"前端\", \"React\", \"架构\", \"造轮子\", \"Next\"]\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n    props = _objectWithoutProperties(_ref, _excluded);\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"\\u6700\\u8FD1\\u7B14\\u8005\\u817E\\u51FA\\u4E86\\u5927\\u628A\\u7684\\u65F6\\u95F4\\uFF0C\\u5B66\\u4E60\\u4E86\\u4E00\\u4E0BReact18\\u3002\"), mdx(\"h3\", null, \"\\u5BFC\\u822A\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"#%E4%BB%80%E4%B9%88%E6%98%AFssr\"\n  }, \"\\u4EC0\\u4E48\\u662FSSR\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"#react-18-%E4%B9%8B%E5%89%8D%E7%9A%84%E6%97%A7ssr\"\n  }, \"React18\\u4E4B\\u524D\\u7684\\u65E7SSR\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"#%E6%89%8B%E5%8A%A8%E5%AE%9E%E7%8E%B0%E6%97%A7ssr\"\n  }, \"\\u624B\\u52A8\\u5B9E\\u73B0\\u65E7SSR\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"#%E4%B8%BA%E4%BB%80%E4%B9%88%E7%94%A8-next-js\"\n  }, \"\\u4E3A\\u4EC0\\u4E48\\u7528Next.js\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"#react-18-%E7%9A%84%E6%96%B0ssr\"\n  }, \"React18\\u7684\\u65B0SSR\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"#suspense%E7%BB%84%E4%BB%B6\"\n  }, \"Suspense\\u7EC4\\u4EF6\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"#%E6%B5%81%E5%BC%8F%E4%BC%A0%E8%BE%93-html\"\n  }, \"\\u6D41\\u5F0F\\u4F20\\u8F93Html\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"#%E6%B5%81%E5%BC%8Fhtml-suspense\"\n  }, \"\\u6D41\\u5F0FHTML + Suspense\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"#%E9%80%89%E6%8B%A9%E6%80%A7%E6%B0%B4%E5%90%88-suspense\"\n  }, \"\\u9009\\u62E9\\u6027\\u6C34\\u5408 + Suspense\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"#%E5%85%A8%E6%96%87%E6%80%BB%E7%BB%93\"\n  }, \"\\u5168\\u6587\\u603B\\u7ED3\"))), mdx(\"p\", null, \"React18\\u5E26\\u6765\\u4E86\\u8BB8\\u591A\\u65B0\\u7279\\u6027\\uFF0C\\u5176\\u4E2D\\u5305\\u62EC\", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"SSR\"), \"\\u7684\\u589E\\u5F3A\\u548C\", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"Suspense\"), \"\\u7684\\u589E\\u5F3A\\u3002\\u672C\\u6587\\u5C31\\u6765\\u5177\\u4F53\\u5256\\u6790\\u4E00\\u4E0B\\u8FD9\\u4E24\\u90E8\\u5206\\u7684\\u53D8\\u5316\\u3002\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/reactwg/react-18/discussions/37\",\n    \"target\": \"_blank\",\n    \"rel\": \"nofollow noopener noreferrer\"\n  }, \"\\u5B98\\u65B9React18 SSR Discussion\"))), mdx(\"p\", null, \"\\u90A3\\u4E48\\uFF0C\\u9996\\u5148\\u6765\\u8BE6\\u7EC6\\u8BB2\\u4E00\\u4E0BSSR\\u3002\"), mdx(\"h3\", null, \"\\u4EC0\\u4E48\\u662FSSR\"), mdx(\"p\", null, \"SSR\\u5E76\\u4E0D\\u662F\\u6700\\u8FD1\\u624D\\u53D1\\u660E\\u7684\\uFF0C\\u65E9\\u5728\\u4E92\\u8054\\u7F51\\u521D\\u671F\\uFF0C\\u6211\\u4EEC\\u770B\\u5230\\u7684web\\u9875\\u9762\\u51E0\\u4E4E\\u90FD\\u662F\\u670D\\u52A1\\u7AEF\\u6E32\\u67D3\\u7684\\uFF0C\\u8BF8\\u5982Jsp\\u3001ASP\\u3001Java\\u7B49\\u3002\\u5F53\\u65F6\\u524D\\u540E\\u7AEF\\u5F00\\u53D1\\u662F\\u4E00\\u4F53\\u7684\\uFF0CUI\\u901A\\u8FC7\\u6A21\\u7248\\u6765\\u8868\\u73B0\\uFF0C\\u5E76\\u5728\\u670D\\u52A1\\u7AEF\\u5904\\u7406\\u6210html\\u53D1\\u9001\\u5230\\u6D4F\\u89C8\\u5668\\u3002\\u5982\\u4ECA\\u6211\\u4EEC\\u6240\\u8BF4\\u7684SSR\\u5F80\\u5F80\\u6307\\u7684\\u662F\\u5728\\u4F7F\\u7528\\u524D\\u7AEF\\u7EC4\\u4EF6\\u5316\\u7684\\u6846\\u67B6\\u5982React\\u3001Vue\\u65F6\\uFF0C\\u670D\\u52A1\\u7AEF\\u6E32\\u67D3\\u7EC4\\u4EF6\\u5E76\\u6700\\u7EC8\\u751F\\u6210html\\u53D1\\u9001\\u5230\\u5BA2\\u6237\\u7AEF\\u3002\"), mdx(\"p\", null, \"\\u5BF9\\u6BD4\\u5BA2\\u6237\\u7AEF\\u6E32\\u67D3\\uFF08CSR\\uFF09\\u4E3B\\u8981\\u4F18\\u52BF\\u5C31\\u662F\\uFF1A\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"SEO\\u53CB\\u597D\"), \"\\uFF1Ahtml\\u5728\\u670D\\u52A1\\u7AEF\\u6E32\\u67D3\\uFF0C\\u641C\\u7D22\\u5F15\\u64CE\\u80FD\\u6293\\u53D6\\u9875\\u9762\\u5185\\u5BB9\\uFF0CSEO\\u6548\\u679C\\u597D\\u3002\\u800CCSR\\u9875\\u9762\\u5F80\\u5F80html\\u662F\\u7A7A\\u7684\\u3002\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"\\u9996\\u5C4F\\u52A0\\u8F7D\\u901F\\u5EA6\\u5FEB\"), \"\\uFF1A\\u7528\\u6237\\u8BF7\\u6C42\\u9875\\u9762\\u540E\\u76F4\\u63A5\\u8FD4\\u56DE\\u5B8C\\u6574\\u7684HTML\\u5E76\\u5C55\\u793A\\u3002\\u4E0D\\u9700\\u8981\\u7B49\\u5F85\\u5BA2\\u6237\\u7AEF\\u4E0B\\u8F7D\\u5B8C\\u6574js\\u5E76\\u6267\\u884C\\uFF0C\\u51CF\\u5C11\\u767D\\u5C4F\\u65F6\\u95F4\\u3002\")), mdx(\"p\", null, \"\\u7F3A\\u70B9\\u5C31\\u662F\\uFF0C\\u9700\\u8981node\\u670D\\u52A1\\u5668\\uFF0C\\u4E0D\\u80FD\\u50CFCSR\\u5E94\\u7528\\u90A3\\u6837\\u53EF\\u4EE5\\u76F4\\u63A5\\u653E\\u5230CDN\\u4E0A\\u3002\"), mdx(\"p\", null, \"React\\u6280\\u672F\\u6808\\u7684\\u540C\\u5B66\\u5728\\u60F3\\u5230SSR\\u65F6\\uFF0C\\u5F80\\u5F80\\u7B2C\\u4E00\\u53CD\\u5E94\\u5C31\\u662F\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://nextjs.org/docs/pages/building-your-application/rendering\",\n    \"target\": \"_blank\",\n    \"rel\": \"nofollow noopener noreferrer\"\n  }, \"Next.js\"), \"\\u3002Next.js\\u662F\\u4E00\\u5957\\u5B8C\\u6574\\u7684SSR\\u5E94\\u7528\\u5F00\\u53D1\\u6846\\u67B6\\uFF0C\\u5305\\u542B\\u8DEF\\u7531\\u7CFB\\u7EDF\\u3001\\u6570\\u636E\\u83B7\\u53D6\\u3001SSR\\u3001SSG\\u3001\\u56FE\\u7247\\u811A\\u672C\\u4F18\\u5316\\u7B49\\u3002\\u5B83\\u5E95\\u5C42\\u662F\\u57FA\\u4E8EReact\\uFF0C\\u5176\\u4E2DSSR\\u7684\\u5B9E\\u73B0\\u4E5F\\u662FReact\\u672C\\u8EAB\\u63D0\\u4F9B\\u7684\\u80FD\\u529B\\u3002\"), mdx(\"p\", null, \"\\u8FD9\\u662F\\u56E0\\u4E3A\\uFF0CReact\\u5177\\u6709\\u540C\\u6784\\u7279\\u6027\\uFF0C\\u5B83\\u5141\\u8BB8\\u76F8\\u540C\\u7684\\u4EE3\\u7801\\u5728\\u670D\\u52A1\\u5668\\u548C\\u5BA2\\u6237\\u7AEF\\u4E0A\\u8FD0\\u884C\\u3002\"), mdx(\"h3\", null, \"React18\\u4E4B\\u524D\\u7684\\u65E7SSR\"), mdx(\"p\", null, \"React\\u63D0\\u4F9B\\u4E86\\u4E00\\u4E9B\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://react.dev/reference/react-dom/server\",\n    \"target\": \"_blank\",\n    \"rel\": \"nofollow noopener noreferrer\"\n  }, \"Server Api\"), \"\\u5E2E\\u52A9\\u5728\\u670D\\u52A1\\u7AEF\\u6E32\\u67D3html\\uFF0C\\u5E76\\u5728\\u5BA2\\u6237\\u7AEF\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://react.dev/reference/react-dom/client/hydrateRoot\",\n    \"target\": \"_blank\",\n    \"rel\": \"nofollow noopener noreferrer\"\n  }, \"\\u6C34\\u5408\"), \"\\uFF08Hydration\\uFF09\\u3002\"), mdx(\"p\", null, \"\\u7B80\\u8FF0\\u4E0B\\u8FD9\\u4E2A\\u8FC7\\u7A0B\\uFF1A\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"\\u63A5\\u6536\\u5230\\u4E00\\u4E2A\\u8BF7\\u6C42\\u540E\\uFF0CReact\\u5728server\\u7AEF\\u6267\\u884C\", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Server Api\"), \"\\uFF0C\\u5C06React\\u7EC4\\u4EF6\\uFF08\\u6BD4\\u5982\", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"<App />\"), \"\\uFF09\\u6E32\\u67D3\\u6210string\\u6216\\u8005stream\\u5F62\\u5F0F\\u7684html\\u3002\\u8FD9\\u4E2A\\u8FC7\\u7A0B\\u662F\\u670D\\u52A1\\u7AEF\\u7684React\\u6267\\u884C\\u7684\\u3002\\u6B64\\u65F6\\uFF0Chtml\\u4E2D\\u53EA\\u5305\\u542B\\u9759\\u6001\\u7684\\u5185\\u5BB9\\uFF0C\\u4E0D\\u5305\\u542B\\u4E8B\\u4EF6\\u76D1\\u542C\\u5668\\u7B49\\uFF0C\\u9875\\u9762\\u65E0\\u6CD5\\u4EA4\\u4E92\\u3002\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"\\u5F53\\u8FD9\\u4E2Ahtml\\u6E32\\u67D3\\u5230web\\u7AEF\\u65F6\\uFF0C\\u6D4F\\u89C8\\u5668\\u53BB\\u6267\\u884Cjs\\u811A\\u672C\\uFF0C\\u6B64\\u65F6\\u5F00\\u59CB\\u7531\\u5BA2\\u6237\\u7AEF\\u7684React\\u63A5\\u7BA1\\u4E86\\u3002\\u6267\\u884C\", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"hydrateRoot\"), \"\\u65B9\\u6CD5\\uFF0C\\u4F1A\\u5C06\\u8BE5html\\u548CReact\\u7EC4\\u4EF6\\u6811\\uFF08\\u6BD4\\u5982\\u4E0A\\u4E00\\u6B65\\u7684\", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"<App />\"), \"\\uFF09\\u8FDB\\u884C\", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Hydration\"), \"\\u5904\\u7406\\u3002\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Hydration\"), \"\\u6D41\\u7A0B\\uFF0C\\u548C\\u6211\\u4EEC\\u719F\\u6089\\u7684\", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"createRoot\"), \"\\u89E6\\u53D1\\u7684\\u9996\\u6B21\\u6E32\\u67D3\\u6D41\\u7A0B\\u4E00\\u6837\\u3002\\u4F1A\\u6267\\u884C\\u5230\", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"render\\u9636\\u6BB5\"), \"\\uFF0C\\u53EA\\u4E0D\\u8FC7\", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Hydration\"), \"\\u4F1A\\u590D\\u7528dom\\uFF0C\\u5C06\\u521B\\u5EFA\\u7684fiber\\u4E0Edom\\u5173\\u8054\\uFF0C\\u5E76\\u4E14\\u5728\", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"completeWork\"), \"\\u65F6\\u4E0D\\u521B\\u5EFAdom\\u3002\\u6267\\u884C\\u5230\", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"commit\\u9636\\u6BB5\"), \"\\u65F6\\uFF0C\\u4F1A\\u7ED1\\u5B9A\\u4E0A\\u4E8B\\u4EF6\\u76D1\\u542C\\u5668\\u3002\\u8FD9\\u6837\\u6D41\\u7A0B\\u7ED3\\u675F\\u540E\\uFF0C\\u9875\\u9762\\u5C31\\u6709\\u4E86\\u4EA4\\u4E92\\u6027\\u3002\"))), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"\\u4E00\\u53E5\\u8BDD\\u6982\\u8FF0\\u5C31\\u662F\\uFF1Aserver\\u7AEFReact\\u6E32\\u67D3\\u51FA\\u9996\\u5C4F\\u9875\\u9762\\uFF0C\\u6D4F\\u89C8\\u5668\\u53EF\\u4EE5\\u76F4\\u63A5\\u5C55\\u793A\\uFF0C\\u4F46\\u662F\\u4EA4\\u4E92\\u4E0D\\u4E86\\u3002Hydration\\u5C31\\u662Fweb\\u7AEFReact\\u63A5\\u7BA1\\u9875\\u9762\\u7684\\u8FC7\\u7A0B\\uFF0C\\u5E76\\u8BA9\\u9875\\u9762\\u53D8\\u5F97\\u53EF\\u4EA4\\u4E92\"), \"\\u3002\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"\\u5176\\u4E2D\\u670D\\u52A1\\u7AEF\\u6E32\\u67D3\\u90E8\\u5206\", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"renderToString\"), \"\\u539F\\u7406\\uFF1A\\u5C31\\u662F\\u9012\\u5F52\\u904D\\u5386\\u7EC4\\u4EF6\\u6811\\uFF0C\\u62FC\\u63A5\\u6210html\\u5B57\\u7B26\\u4E32\\u3002\", mdx(\"br\", null), \"\\n\\u5BA2\\u6237\\u7AEF\\u6C34\\u5408\", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"hydrateRoot\"), \"\\u539F\\u7406\\u5982\\u4E0A\\u3002\\u4EE3\\u7801\\u4E0D\\u8D58\\u8FF0\\u3002\", mdx(\"br\", null), \"\\n\\u53C2\\u8003\\u6587\\u7AE0\\uFF1A\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://zhuanlan.zhihu.com/p/622415299\",\n    \"target\": \"_blank\",\n    \"rel\": \"nofollow noopener noreferrer\"\n  }, \"React SSR\\u6D41\\u7A0B\\u5206\\u6790\"), \"\\u3002\")), mdx(\"h3\", null, \"\\u624B\\u52A8\\u5B9E\\u73B0\\u65E7SSR\"), mdx(\"p\", null, \"\\u4E0B\\u9762\\u5199\\u4E00\\u4E2A\\u7B80\\u5355\\u7684demo\\uFF0C\\u6765\\u5B9E\\u73B0SSR\\u3002\"), mdx(\"p\", null, \"\\u4E3A\\u4E86\\u65B9\\u4FBF\\u5B9E\\u73B0\\u540C\\u4E00\\u5957\\u7EC4\\u4EF6\\uFF0C\\u65E2\\u5728\\u670D\\u52A1\\u7AEF\\u6E32\\u67D3\\uFF0C\\u53C8\\u5728\\u5BA2\\u6237\\u7AEFhydrate\\u3002\\u6240\\u4EE5\\u6211\\u5C06\\u670D\\u52A1\\u7AEF\\u4EE3\\u7801\\u548C\\u5BA2\\u6237\\u7AEF\\u4EE3\\u7801\\u653E\\u5728\\u540C\\u4E00\\u4E2A\\u9879\\u76EE\\u91CC\\uFF0C\\u521B\\u5EFA\\u4E86\\u4E24\\u4E2Awebpack\\u914D\\u7F6E\\u6587\\u4EF6\\u3002\\u8FD9\\u6837\\u5B83\\u4EEC\\u90FD\\u65B9\\u4FBF\\u5BFC\\u5165\", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"App.jsx\"), \"\\u3002\"), mdx(\"img\", {\n    \"src\": \"assets/react-ssr-file-struct.jpg\",\n    \"alt\": \"项目文件结构\"\n  }), mdx(\"p\", null, \"\\u53C2\\u8003\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://react.dev/reference/react-dom/server/renderToPipeableStream#rendering-a-react-tree-as-html-to-a-nodejs-stream\",\n    \"target\": \"_blank\",\n    \"rel\": \"nofollow noopener noreferrer\"\n  }, \"\\u5B98\\u65B9\\u6587\\u6863\"), \"\\uFF0C\\u9996\\u5148\\u5148\\u5B9E\\u73B0\", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"App.jsx\"), \"\\uFF1A\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"jsx\"\n  }, mdx(\"pre\", {\n    parentName: \"div\",\n    \"className\": \"language-jsx\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-jsx\"\n  }, mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"import\"), \" React\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \" useState \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"from\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"\\\"react\\\"\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"export\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"default\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"function\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"App\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"return\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"<\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token class-name\"\n  }, \"Count\")), \" \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"/>\")), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), \"\\n\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"function\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"Count\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"const\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"[\"), \"count\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \" setCount\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"]\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"=\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"useState\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token number\"\n  }, \"0\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"return\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), \"\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"<\"), \"div\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \">\")), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token plain-text\"\n  }, \"\\n      \"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"<\"), \"h1\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \">\")), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token plain-text\"\n  }, \"\\u6D4B\\u8BD5SSR\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"</\"), \"h1\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \">\")), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token plain-text\"\n  }, \"\\n      \"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"<\"), \"div\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \">\")), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token plain-text\"\n  }, \"\\u8BA1\\u6570\\u5668\\uFF1A\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"count\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"</\"), \"div\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \">\")), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token plain-text\"\n  }, \"\\n      \"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"<\"), \"button\"), \" \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token attr-name\"\n  }, \"onClick\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token script language-javascript\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token script-punctuation punctuation\"\n  }, \"=\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \")\"), \" \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token operator\"\n  }, \"=>\"), \" \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token function\"\n  }, \"setCount\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), \"count \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token operator\"\n  }, \"+\"), \" \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token number\"\n  }, \"1\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"}\")), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \">\")), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token plain-text\"\n  }, \"+1\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"</\"), \"button\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \">\")), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token plain-text\"\n  }, \"\\n    \"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"</\"), \"div\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \">\")), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\")))), mdx(\"p\", null, \"App\\u7EC4\\u4EF6\\u5D4C\\u5957\\u4E86\\u4E00\\u4E2A\\u7B80\\u5355\\u7684\\u8BA1\\u6570\\u5668\\u7EC4\\u4EF6\\u3002\"), mdx(\"p\", null, \"\\u6211\\u4EEC\\u6253\\u7B97\\u5728server\\u4E0A\\u901A\\u8FC7\", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"renderToString\"), \"\\u65B9\\u6CD5\\u76F4\\u63A5\\u6E32\\u67D3\\u51FA\\u4E00\\u4E2A\\u5305\\u542B\\u5BA2\\u6237\\u7AEF\\u6267\\u884C\\u811A\\u672C\\u7684html\\u3002\\u8FD9\\u6837\\u7684\\u8BDD\\u6D4F\\u89C8\\u5668\\u6E32\\u67D3\\u540E\\u53EF\\u4EE5\\u76F4\\u63A5\\u6267\\u884C\\u3002\"), mdx(\"p\", null, \"\\u6240\\u4EE5\\u6211\\u4EEC\\u8981\\u5B9E\\u73B0\\u4E00\\u4E0B\\u5BA2\\u6237\\u7AEF\\u5F85\\u6267\\u884C\\u7684\\u811A\\u672C\", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"index.js\"), \"\\uFF1A\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"javascript\"\n  }, mdx(\"pre\", {\n    parentName: \"div\",\n    \"className\": \"language-javascript\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-javascript\"\n  }, mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"import\"), \" React \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"from\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"\\\"react\\\"\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"import\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \" hydrateRoot \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"from\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"\\\"react-dom/client\\\"\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"import\"), \" App \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"from\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"\\\"./App.jsx\\\"\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token comment\"\n  }, \"// ...\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token comment\"\n  }, \"// \\u5F00\\u59CBhydrate\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"function\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"hydrate\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"hydrateRoot\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), \"document\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \".\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"getElementById\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"\\\"app\\\"\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"<\"), \"App \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"/\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \">\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token comment\"\n  }, \"// ...\")))), mdx(\"p\", null, \"\\u5BA2\\u6237\\u7AEF\\u811A\\u672C\\u5199\\u5B8C\\u4E86\\uFF0C\\u4F7F\\u7528webpack\\u6253\\u5305\\u5BA2\\u6237\\u7AEF\\u4EE3\\u7801\\uFF0C\\u751F\\u6210\", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"output/bundle.js\"), \"\\u3002\"), mdx(\"p\", null, \"\\u7136\\u540E\\u5728\\u670D\\u52A1\\u7AEF\", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"server.js\"), \"\\u91CC\\uFF0C\\u8BBE\\u7F6E\\u8BF7\\u6C42\\u8DEF\\u7531\\uFF0C\\u5E76\\u901A\\u8FC7\", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"renderToString\"), \"\\u65B9\\u6CD5\\u8FD4\\u56DEhtml\\u3002html\\u4E2D\\u5305\\u542B\\u811A\\u672C\", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"bundle.js\"), \"\\uFF1A\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"javascript\"\n  }, mdx(\"pre\", {\n    parentName: \"div\",\n    \"className\": \"language-javascript\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-javascript\"\n  }, mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"const\"), \" React \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"=\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"require\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"\\\"react\\\"\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"const\"), \" Koa \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"=\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"require\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"\\\"koa\\\"\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token comment\"\n  }, \"// ...\"), \"\\napp\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \".\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"use\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"serve\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"\\\"./output\\\"\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n\\nrouter\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \".\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"get\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"\\\"/\\\"\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"async\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token parameter\"\n  }, \"ctx\", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \" next\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"=>\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n  ctx\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \".\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"set\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"\\\"content-type\\\"\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"\\\"text/html\\\"\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n  ctx\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \".\"), \"status \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"=\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token number\"\n  }, \"200\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"const\"), \" appString \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"=\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"renderToString\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"<\"), \"App \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"/\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \">\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n  ctx\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \".\"), \"body \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"=\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token template-string\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token template-punctuation string\"\n  }, \"`\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token string\"\n  }, \"<html>\\n      <head>\\n        <meta charSet=\\\"utf-8\\\" />\\n        <meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1\\\" />\\n        <link rel=\\\"stylesheet\\\" href=\\\"/styles.css\\\"></link>\\n        <title>My App</title>\\n      </head>\\n      <body>\\n        <div id=\\\"app\\\">\\n          \"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token interpolation\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token interpolation-punctuation punctuation\"\n  }, \"${\"), \"appString\", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token interpolation-punctuation punctuation\"\n  }, \"}\")), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token string\"\n  }, \"\\n        </div>\\n      </body>\\n      <script src=\\\"/bundle.js\\\" async></script>\\n    </html>\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token template-punctuation string\"\n  }, \"`\")), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token comment\"\n  }, \"// ...\"), \"\\n\\napp\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \".\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"listen\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token number\"\n  }, \"888\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\")))), mdx(\"p\", null, \"\\u5F00\\u53D1\\u5B8C\\u4E86\\uFF0C\\u6D4B\\u8BD5\\u4E0B\\u3002\"), mdx(\"img\", {\n    \"src\": \"assets/react-ssr-test.jpg\",\n    \"alt\": \"输出\"\n  }), mdx(\"p\", null, \"\\u53EF\\u4EE5\\u6B63\\u5E38\\u5C55\\u793A\\u8BA1\\u6570\\u548C\\u70B9\\u51FB+1\\u3002\\u5982\\u679C\\u6211\\u4EEC\\u628A\", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"index.js\"), \"\\u91CC\\u9762\\u7684\", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"hydrateRoot\"), \"\\u65B9\\u6CD5\\u6CE8\\u91CA\\u6389\\uFF0C\\u5373\\u4E0D\\u6C34\\u5408\\uFF0C\\u4F1A\\u53D1\\u73B0\\uFF0C\\u4E0A\\u9762\\u7684\\u6309\\u94AE\\u70B9\\u51FB\\u5DF2\\u7ECF\\u6CA1\\u6709\\u53CD\\u5E94\\u4E86\\u3002\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"\\u8BE5\\u6D4B\\u8BD5\\u9879\\u76EE\\u7684\\u4EE3\\u7801\\u5728\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/missmess/leon-build-wheel/tree/main/packages/demo-ssr-react\",\n    \"target\": \"_blank\",\n    \"rel\": \"nofollow noopener noreferrer\"\n  }, \"\\u8FD9\\u91CC\"))), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"\\u601D\\u8003\\uFF1AReact\\u7684SSR\\u548C\\u4F20\\u7EDF\\u540E\\u7AEF\\u8BED\\u8A00\\u7684SSR\\u7684\\u533A\\u522B\\u662F\\u4EC0\\u4E48\\u5462\\uFF1F\", mdx(\"br\", null), \"\\n\\u6700\\u660E\\u663E\\u7684\\u533A\\u522B\\u5C31\\u662F\\u4F20\\u7EDFSSR\\u662F\\u591A\\u9875\\u5E94\\u7528\\uFF0C\\u9875\\u9762\\u901A\\u8FC7\\u5237\\u65B0\\u8DF3\\u8F6C\\u3002\\u8BF7\\u6C42\\u4E00\\u4E2A\\u5730\\u5740\\u8FD4\\u56DE\\u4E00\\u4E2Ahtml\\u9875\\u9762\\u3002\\u4F53\\u9A8C\\u8F83\\u5DEE\\u3002\", mdx(\"br\", null), \"\\n\\u800CReact\\u7684SSR\\u662F\\u540C\\u6784\\u5E94\\u7528\\uFF0C\\u5373\\u8BF7\\u6C42\\u5730\\u5740\\u7684\\u9996\\u5C4F\\u7531\\u670D\\u52A1\\u7AEF\\u6E32\\u67D3\\uFF0C\\u6B64\\u540E\\u5BA2\\u6237\\u7AEFReact\\u63A5\\u7BA1\\uFF0C\\u5F62\\u6210\\u5355\\u9875\\u5E94\\u7528\\u3002\\u4F53\\u9A8C\\u5F88\\u4F18\\u79C0\\u3002\")), mdx(\"h3\", null, \"\\u4E3A\\u4EC0\\u4E48\\u7528Next.js\"), mdx(\"p\", null, \"\\u65E2\\u7136React\\u5DF2\\u7ECF\\u652F\\u6301\\u4E86SSR\\uFF0C\\u90A3\\u4E3A\\u4EC0\\u4E48\\u8FD8\\u9700\\u8981Next.js\\u8FD9\\u6837\\u7684\\u6280\\u672F\\u5462\\uFF1F\", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"\\uFF08\\u8FD9\\u91CC\\u4E3B\\u8981\\u8BF4\\u7684\\u662FNext.js\\u7684Pages Router\\uFF09\\u3002\")), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"\\u5F00\\u53D1\\u4F53\\u9A8C\")), mdx(\"p\", null, \"\\u4ECE\\u4E0A\\u9762\\u7684\\u4F8B\\u5B50\\u53EF\\u4EE5\\u770B\\u51FA\\u6765\\uFF0C\\u624B\\u52A8\\u901A\\u8FC7React\\u5B9E\\u73B0SSR\\uFF0C\\u5728\\u4E00\\u4E2A\\u9879\\u76EE\\u91CC\\u9762\\uFF0C\\u8981\\u81EA\\u5DF1\\u63A7\\u5236\\u597D\\u524D\\u540E\\u7AEF\\u4EE3\\u7801\\u7684\\u8FB9\\u754C\\u3002\\u54EA\\u4E9B\\u662F\\u524D\\u7AEF\\u7684\\u4EE3\\u7801\\uFF0C\\u54EA\\u4E9B\\u662F\\u540E\\u7AEF\\u7684\\u4EE3\\u7801\\uFF1B\\u8981\\u81EA\\u5DF1\\u8003\\u8651\\u600E\\u4E48\\u5B9E\\u73B0\\u524D\\u7AEF\\u548C\\u540E\\u7AEF\\u90FD\\u53EF\\u4EE5\\u8FD0\\u884C\\u7684\\u4EE3\\u7801\\uFF1B\\u5E76\\u4E14\\u8FD8\\u9700\\u8981\\u5206\\u5F00\\u7F16\\u8BD1\\uFF0C\\u6574\\u4F53\\u5F00\\u53D1\\u4F53\\u9A8C\\u5F88\\u5DEE\\u3002\\u800C\\u4F7F\\u7528\", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"Next.js\"), \"\\u5C31\\u4E0D\\u9700\\u8981\\u8003\\u8651\\u8FD9\\u4E9B\\uFF0CNext.js\\u5DF2\\u7ECF\\u5E2E\\u6211\\u4EEC\\u5904\\u7406\\u597D\\u4E86\\u3002\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"\\u8DEF\\u7531\")), mdx(\"p\", null, \"\\u4E5F\\u662F\\u4E0A\\u9762\\u7684\\u4F8B\\u5B50\\uFF0C\\u6211\\u4EEC\\u4EC5\\u4EC5\\u5B9E\\u73B0\\u4E86\\u4E00\\u4E2A\\u57FA\\u7840\\u7684ssr\\u5E94\\u7528\\uFF0C\\u6CA1\\u6709\\u5305\\u542B\\u591A\\u9875\\u9762\\u8DEF\\u7531\\uFF0C\\u800C\\u8DEF\\u7531\\u662F\\u6700\\u91CD\\u8981\\u7684\\u529F\\u80FD\\u4E4B\\u4E00\\u3002\\u90A3ssr\\u5982\\u679C\\u8981\\u652F\\u6301\\u591A\\u9875\\u9762\\u600E\\u4E48\\u505A\\uFF1F\"), mdx(\"p\", null, \"\\u597D\\u5728\", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"react-router\"), \"\\u652F\\u6301\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://reactrouter.com/en/main/guides/ssr\",\n    \"target\": \"_blank\",\n    \"rel\": \"nofollow noopener noreferrer\"\n  }, \"ssr\"), \"\\u3002\\u5728\\u670D\\u52A1\\u7AEF\\u4F7F\\u7528\", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"StaticRouter\"), \"\\uFF0C\\u5728\\u5BA2\\u6237\\u7AEF\\u4F7F\\u7528\", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"BrowserRouter\"), \"\\u3002\\u4F46\\u662F\\u8DEF\\u7531\\u529F\\u80FD\\u5F88\\u591A\\u5440\\uFF0C\\u4E24\\u8FB9\\u9002\\u914D\\u8D77\\u6765\\u4E5F\\u4E0D\\u5BB9\\u6613\\u3002\\u800C\", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"Next.js\"), \"\\u5219\\u901A\\u8FC7\\u57FA\\u4E8E\\u6587\\u4EF6\\u7684\\u8DEF\\u7531\\u7CFB\\u7EDF\\u5C06\\u8FD9\\u4E00\\u7CFB\\u5217\\u590D\\u6742\\u5DE5\\u4F5C\\u5168\\u90FD\\u5904\\u7406\\u5B8C\\u4E86\\uFF0C\\u6211\\u4EEC\\u5F00\\u7BB1\\u5373\\u7528\\u5373\\u53EF\\u3002\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"\\u5F02\\u6B65\\u6570\\u636E\\u83B7\\u53D6\")), mdx(\"p\", null, \"\\u4E0A\\u9762\\u7684\\u4F8B\\u5B50\\u4E5F\\u6CA1\\u6709\\u5C55\\u73B0\\u5982\\u4F55\\u5728ssr\\u65F6\\u83B7\\u53D6\\u5F02\\u6B65\\u6570\\u636E\\uFF0C\\u5E76\\u4F9D\\u636E\\u6570\\u636E\\u6E32\\u67D3\\u9875\\u9762\\u3002\\u8FD9\\u91CC\\u8981\\u8003\\u8651\\u7684\\uFF0C\\u4E00\\u662F\\u6570\\u636E\\u8981\\u5728\\u670D\\u52A1\\u7AEF\\u83B7\\u53D6\\uFF0C\\u4E8C\\u662F\\u6570\\u636E\\u4E5F\\u8981\\u6CE8\\u5165\\u5230\\u5BA2\\u6237\\u7AEF\\uFF0C\\u5426\\u5219\\u6C34\\u5408\\u4F1A\\u51FA\\u95EE\\u9898\", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"\\uFF08\\u6BD4\\u5982ssr\\u83B7\\u53D6\\u6570\\u636E\\u4E3A100\\u4E2A\\u5143\\u7D20\\u7684list\\uFF0C\\u5E76\\u6E32\\u67D3\\u51FA100\\u4E2Adiv\\u3002\\u5BA2\\u6237\\u7AEF\\u5982\\u679C\\u672A\\u83B7\\u53D6\\u8FD9\\u4E2Aprops\\u6570\\u636E\\uFF0C\\u90A3\\u5BA2\\u6237\\u7AEF\\u4F1A\\u6E32\\u67D3\\u7A7A\\u5217\\u8868\\uFF09\"), \"\\u3002\"), mdx(\"p\", null, \"\\u4E3A\\u4E86\\u5B9E\\u73B0\\u4E24\\u7AEF\\u5F02\\u6B65\\u6570\\u636E\\u83B7\\u53D6\\u7684\\u540C\\u6784\\uFF0C\\u6211\\u4EEC\\u9700\\u8981\\u501F\\u52A9\\u4E8E\", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"react-router\"), \"\\u7684loader\\u529F\\u80FD\\u3002\\u5728\\u670D\\u52A1\\u7AEF\\uFF0C\\u5728loader\\u4E2D\\u8C03\\u7528\\u7EC4\\u4EF6\\u66B4\\u9732\\u7684\\u9759\\u6001\\u65B9\\u6CD5\\u6765\\u83B7\\u53D6\\u5F02\\u6B65\\u6570\\u636E\\uFF0C\\u5E76\\u4F5C\\u4E3Aprops\\u4F20\\u9012\\u5230\\u7EC4\\u4EF6\\u3002\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"javascript\"\n  }, mdx(\"pre\", {\n    parentName: \"div\",\n    \"className\": \"language-javascript\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-javascript\"\n  }, mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token comment\"\n  }, \"// router\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"[\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token comment\"\n  }, \"// ...\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \" \\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token literal-property property\"\n  }, \"path\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"\\\"/posts\\\"\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token literal-property property\"\n  }, \"component\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" Posts\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token literal-property property\"\n  }, \"loader\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" isServer \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"?\"), \" Posts\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \".\"), \"getServerData \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" Posts\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \".\"), \"getClientData\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token comment\"\n  }, \"// ...\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"]\"), \"\\n\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token comment\"\n  }, \"// Posts\\u7EC4\\u4EF6\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"function\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"Posts\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token parameter\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \" posts \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"}\")), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"return\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"<\"), \"div\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \">\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"posts\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \".\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"map\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token parameter\"\n  }, \"p\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"=>\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token comment\"\n  }, \"/* */\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"<\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"/\"), \"div\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \">\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), \"\\n\\nPosts\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \".\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function-variable function\"\n  }, \"getServerData\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"=\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"async\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"=>\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"const\"), \" posts \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"=\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"await\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"getPosts\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"return\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \" posts \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\")))), mdx(\"p\", null, \"\\u751F\\u6210ssr\\u7684html\\u65F6\\uFF0C\\u66B4\\u9732\\u6570\\u636E\\u5230\", \"<\", \"script\", \">\", \"\\u6807\\u7B7E\\u4E0B\\u3002\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"javascript\"\n  }, mdx(\"pre\", {\n    parentName: \"div\",\n    \"className\": \"language-javascript\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-javascript\"\n  }, \"ctx\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \".\"), \"body \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"=\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token template-string\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token template-punctuation string\"\n  }, \"`\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token string\"\n  }, \"<html>\\n  // ...\\n  <script id=\\\"_POST_DATA_\\\" type=\\\"application/json\\\">\\n    [{ id: 1, title: \\\"Sumish\\\" }, ...]\\n  </script>\\n  // ...\\n</html>\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token template-punctuation string\"\n  }, \"`\")), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\")))), mdx(\"p\", null, \"\\u5BA2\\u6237\\u7AEF\\uFF0C\\u9700\\u8981\\u4ECEhtml\\u5185\", \"<\", \"script\", \">\", \"\\u6807\\u7B7E\\u4E0B\\u83B7\\u53D6\\u6570\\u636E\\u5E76\\u6CE8\\u5165\\u3002\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"javascript\"\n  }, mdx(\"pre\", {\n    parentName: \"div\",\n    \"className\": \"language-javascript\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-javascript\"\n  }, \"Posts\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \".\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function-variable function\"\n  }, \"getClientData\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"=\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"=>\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"const\"), \" posts \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"=\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token constant\"\n  }, \"JSON\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \".\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"parse\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), \"document\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \".\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"getElementById\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"\\\"__NEXT_DATA__\\\"\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \".\"), \"textContent\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"return\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \" posts \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\")))), mdx(\"p\", null, mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"Next.js\"), \"\\u7684\\u65B9\\u6848\\u53EF\\u80FD\\u4E0E\\u4E0A\\u9762\\u7C7B\\u4F3C\\uFF0C\\u5B83\\u5DF2\\u7ECF\\u5B8C\\u5168\\u5C01\\u88C5\\u597D\\u8BE5\\u529F\\u80FD\\uFF0C\\u53EA\\u9700\\u8981\\u63D0\\u4F9B\\u4E00\\u4E2A\", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"getServerSideProps\"), \"\\u51FD\\u6570\\u5E76\\u5B9E\\u73B0\\u5373\\u53EF\\u3002\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"CSS\\u5904\\u7406\")), mdx(\"p\", null, \"\\u4E0A\\u9762\\u7684\\u4F8B\\u5B50\\u4E2D\\uFF0C\\u6211\\u4EEC\\u5C06css\\u653E\\u5728\\u4E86html\\u4E0A\\u3002\\u8FD9\\u6837\\u662F\\u53EF\\u884C\\u7684\\u3002\\u4F46\\u662F\\u5982\\u679C\\u6211\\u4EEC\\u60F3\\u8981\\u4F7F\\u7528less\\u8FD9\\u6837\\u7684css\\u9884\\u5904\\u7406\\u5668\\uFF0C\\u751A\\u81F3\\u662Femotion\\u8FD9\\u6837\\u7684\", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"css-in-js\"), \"\\u6280\\u672F\\uFF0Cssr\\u5C31\\u4E0D\\u597D\\u5904\\u7406\\u4E86\\u3002\\u56E0\\u4E3Anode\\u4E0A\\u65E0\\u6CD5\\u6267\\u884Cdom\\u64CD\\u4F5C\\u3002ssr\\u5904\\u7406css\\uFF0C\\u5FC5\\u987B\\u8981\\u5C06css\\u5185\\u5BB9\\u751F\\u6210\\u5230html\\u5B57\\u7B26\\u4E32\\u4E2D\\u3002\\u597D\\u5728\", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"Next.js\"), \"\\u4E5F\\u4E3A\\u6211\\u4EEC\\u5C01\\u88C5\\u597D\\u4E86\\u3002\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"\\u5355\\u9875\\u4F53\\u9A8C\")), mdx(\"p\", null, \"\\u4E0A\\u9762\\u7684\\u4F8B\\u5B50\\u4E2D\\uFF0C\\u6211\\u4EEC\\u5728\\u6C34\\u5408\\u540E\\u4EA4\\u7531\\u5BA2\\u6237\\u7AEFReact\\u5904\\u7406\\u540E\\u7EED\\u64CD\\u4F5C\\uFF0C\\u5C31\\u4E3A\\u4E86\\u5B9E\\u73B0SPA\\u7684\\u826F\\u597D\\u4F53\\u9A8C\\u3002\\u4F46\\u5B9E\\u73B0\\u4E0A\\u8FD8\\u5B58\\u5728\\u95EE\\u9898\\u3002\\u6BD4\\u5982\\u5F02\\u6B65\\u6570\\u636E\\u83B7\\u53D6\\uFF1ASSR\\u65F6\\uFF0C\\u5F02\\u6B65\\u6570\\u636E\\u662F\\u5728\\u670D\\u52A1\\u7AEF\\u83B7\\u53D6\\u5E76\\u5728\\u5BA2\\u6237\\u7AEF\\u6CE8\\u5165\\u3002\\u4F46SPA\\u60C5\\u51B5\\u4E0B\\uFF0C\\u6570\\u636E\\u5219\\u5FC5\\u987B\\u5728\\u5BA2\\u6237\\u7AEF\\u83B7\\u53D6\\u3002\\u8981\\u5E94\\u5BF9\\u8FD9\\u79CD\\u60C5\\u51B5\\uFF0C\\u4EE3\\u7801\\u8FD8\\u9700\\u8981\\u53BBfix\\u3002\\u800CNext.js\\u9ED8\\u8BA4\\u5DF2\\u7ECF\\u5904\\u7406\\u597DSSR\\u573A\\u666F\\u548CSPA\\u573A\\u666F\\u4E0B\\u7684\\u5F02\\u6B65\\u6570\\u636E\\u83B7\\u53D6\\u903B\\u8F91\\u3002\\u5176\\u5B83\\u529F\\u80FD\\u4E5F\\u4E00\\u6837\\u5904\\u7406\\u5B8C\\u5584\\u3002\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"\\u5176\\u4ED6\\u4F18\\u5316\")), mdx(\"p\", null, \"\\u9664\\u6B64\\u4E4B\\u5916\\uFF0CNext.js\\u8FD8\\u63D0\\u4F9B\\u4E86\\u5F88\\u591A\\u4F18\\u5316\\u548C\\u4FBF\\u5229\\u3002\\u5305\\u62ECSEO\\u5904\\u7406\\u3001SSG\\u9759\\u6001\\u751F\\u6210\\u3001TypeScript\\u652F\\u6301\\u3001\\u6253\\u5305\\u4F18\\u5316\\u7B49\\u7B49\\u3002\\u5E76\\u4E14Next.js\\u59CB\\u7EC8\\u8DDF\\u8FDB\\u6700\\u65B0\\u7684React\\u80FD\\u529B\\uFF0C\\u4ECE\\u800C\\u63D0\\u4F9B\\u6027\\u80FD\\u66F4\\u597D\\u7684\\u5E94\\u7528\\u3002\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"\\u53C2\\u8003\\u6587\\u7AE0\\uFF1A\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://blog.csdn.net/frontend_frank/article/details/136470574\",\n    \"target\": \"_blank\",\n    \"rel\": \"nofollow noopener noreferrer\"\n  }, \"React ssr\\u539F\\u7406\"))), mdx(\"h3\", null, \"React18\\u7684\\u65B0SSR\"), mdx(\"p\", null, \"React18\\u4E0B\\uFF0CSSR\\u5F97\\u5230\\u4E86\\u5F88\\u591A\\u589E\\u5F3A\\u7279\\u6027\\u3002\\u5728\\u6B64\\u4E4B\\u524D\\u7684React\\u7248\\u672C\\u4E2D\\uFF0C\\u6B63\\u5982\\u6211\\u4EEC\\u4E0A\\u9762\\u624B\\u52A8\\u5B9E\\u73B0\\u7684\\u4F8B\\u5B50\\uFF0C\\u5B9E\\u73B0SSR\\u9700\\u8981\\uFF1A\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"\\u5728\\u670D\\u52A1\\u7AEF\\uFF0C\\u6574\\u4E2A\\u5E94\\u7528\\u4ECE\\u6570\\u636E\\u6E90fetch\\u6570\\u636E\\uFF1B\\u6574\\u4E2A\\u5E94\\u7528\\u6E32\\u67D3\\u6210\\u5B57\\u7B26\\u4E32\\uFF1B\\u8FD4\\u56DEhtml\\u7684response\\u3002\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"\\u5728\\u5BA2\\u6237\\u7AEF\\uFF0C\\u52A0\\u8F7Djavascript\\uFF1B\\u6267\\u884Cjavascript\\u8FDB\\u884CHydration\\u3002\"))), mdx(\"p\", null, \"\\u8FD9\\u4E24\\u6B65\\u9AA4\\u7F3A\\u4E00\\u4E0D\\u53EF\\uFF0C\\u6309\\u987A\\u5E8F\\u6267\\u884C\\uFF0C\\u5E76\\u4E14\\u5185\\u90E8\\u4E5F\\u662F\\u540C\\u6B65\\u6267\\u884C\\u7684\\u3002\\u6BD4\\u5982\\u670D\\u52A1\\u7AEF\\u5FC5\\u987B\\u83B7\\u53D6\\u5B8C\\u6570\\u636E\\uFF0C\\u5E76\\u5B8C\\u6574\\u6E32\\u67D3\\u3001\\u5BA2\\u6237\\u7AEF\\u63A5\\u6536\\u5230\\u5B8C\\u6574html\\u518D\\u6574\\u4E2A\\u6267\\u884CHydration\\u3002\\u53EF\\u60F3\\u800C\\u77E5\\uFF0C\\u8FD9\\u4E2A\\u8FC7\\u7A0B\\u5E76\\u4E0D\\u9AD8\\u6548\\uFF1A\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"\\u5FC5\\u987B\\u83B7\\u53D6\\u6240\\u6709\\u6570\\u636E\\uFF0C\\u624D\\u80FD\\u663E\\u793A\\u5185\\u5BB9\")), mdx(\"p\", {\n    parentName: \"li\"\n  }, \"  \\u6BD4\\u5982\\u67D0\\u4E00\\u4E2A\\u7EC4\\u4EF6\\u83B7\\u53D6\\u6570\\u636E\\u6BD4\\u8F83\\u8017\\u65F6\\uFF0C\\u90A3\\u5B83\\u5C31\\u4F1A\\u963B\\u585E\\u540E\\u7EED\\u6240\\u6709\\u6B65\\u9AA4\\uFF0C\\u5BFC\\u81F4\\u9875\\u9762\\u767D\\u5C4F\\u65F6\\u95F4\\u5F88\\u957F\\u3002\\u9664\\u975E\\u8BF4\\u628A\\u8FD9\\u4E2A\\u6570\\u636E\\u83B7\\u53D6\\u4ECESSR\\u4E2D\\u6392\\u9664\\uFF0C\\u4E22\\u7ED9CSR\\u53BB\\u5904\\u7406\\u3002\\uFF08CSR\\u5927\\u5BB6\\u90FD\\u61C2\\uFF0C\\u5FC5\\u987B\\u7B49\\u5F85js\\u6267\\u884C\\u5B8C\\u624D\\u5F00\\u59CB\\u83B7\\u53D6\\u6570\\u636E\\uFF09\\u3002\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"\\u5FC5\\u987B\\u52A0\\u8F7D\\u6240\\u6709js\\uFF0C\\u624D\\u80FD\\u5F00\\u59CB\\u6C34\\u5408\")), mdx(\"p\", {\n    parentName: \"li\"\n  }, \"  \\u6BD4\\u5982\\u67D0\\u4E2A\\u7EC4\\u4EF6\\u4EA4\\u4E92\\u903B\\u8F91\\u6BD4\\u8F83\\u590D\\u6742\\uFF0Cjs\\u4EE3\\u7801\\u6BD4\\u8F83\\u591A\\u3002\\u7531\\u4E8EReact\\u53EA\\u80FD\\u4E00\\u6B21\\u6027\\u5B8C\\u6210Hydration\\uFF0C\\u90A3\\u4E48\\u4F60\\u5FC5\\u987B\\u7B49\\u5F85\\u6240\\u6709\\u7EC4\\u4EF6js\\u90FD\\u52A0\\u8F7D\\u5B8C\\u6210\\uFF0C\\u624D\\u80FD\\u5F00\\u59CBHydration\\u3002\\u4F60\\u53EF\\u80FD\\u4F1A\\u9009\\u62E9\\u4EE3\\u7801\\u62C6\\u5206\\uFF0C\\u4F46React\\u6CA1\\u6CD5\\u505A\\u5230Hydration\\u8FC7\\u7A0B\\u4E2D\\u6309\\u9700\\u52A0\\u8F7D\\u7EC4\\u4EF6\\u4EE3\\u7801\\u3002\\u4E3A\\u4E86\\u59A5\\u534F\\uFF0C\\u4F60\\u53EA\\u80FD\\u628A\\u8FD9\\u4E2A\\u7EC4\\u4EF6\\u4ECESSR\\u4E2D\\u79FB\\u9664\\uFF0C\\u5E76\\u4F7F\\u7528\\u4EE3\\u7801\\u62C6\\u5206\\u3002\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"\\u5FC5\\u987B\\u5B8C\\u6210\\u6574\\u4E2A\\u6C34\\u5408\\u8FC7\\u7A0B\\uFF0C\\u9875\\u9762\\u624D\\u80FD\\u4EA4\\u4E92\")), mdx(\"p\", {\n    parentName: \"li\"\n  }, \"  \\u6BD4\\u5982\\u67D0\\u4E2A\\u7EC4\\u4EF6\\u6E32\\u67D3\\u903B\\u8F91\\u5F88\\u590D\\u6742\\uFF0Chydration\\u53EF\\u80FD\\u8017\\u65F6\\u6BD4\\u8F83\\u4E45\\u3002\\u90A3\\u4E48\\u4F60\\u5FC5\\u987B\\u7B49\\u5230\\u6240\\u6709\\u7EC4\\u4EF6hydration\\u7ED3\\u675F\\uFF0C\\u624D\\u80FD\\u4E0E\\u5176\\u4E2D\\u4E00\\u4E2A\\u7EC4\\u4EF6\\u6709\\u4EA4\\u4E92\\u3002\"))), mdx(\"p\", null, \"\\u90A3\\u65B0\\u7684SSR\\u67B6\\u6784\\u600E\\u4E48\\u89E3\\u51B3\\u8FD9\\u4E9B\\u95EE\\u9898\\u5462\\uFF1FReact18\\u5E26\\u6765\\u4E86\\u6D41\\u5F0FHtml\\u548C\\u9009\\u62E9\\u6027\\u6C34\\u5408\\uFF1A\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Streaming Html\"), \"\\uFF1A\\u5728\\u670D\\u52A1\\u7AEF\\uFF0C\\u4F7F\\u7528\", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"renderToPipeableStream\"), \"\\u4EE3\\u66FF\", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"renderToString\"), \"\\u6E32\\u67D3\\uFF0C\\u53EF\\u4EE5\\u8BA9html\\u5206\\u6BB5\\u4F20\\u8F93\\u5230\\u6D4F\\u89C8\\u5668\\uFF0C\\u8BA9\\u6D4F\\u89C8\\u5668\\u53EF\\u4EE5\\u66F4\\u5FEB\\u901F\\u3001\\u5E73\\u6ED1\\u7684\\u663E\\u793A\\u5185\\u5BB9\\u3002\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Selective Hydration\"), \"\\uFF1A\\u5728\\u5BA2\\u6237\\u7AEF\\uFF0C\\u53EF\\u4EE5\\u9488\\u5BF9\\u5DF2\\u7ECF\\u5B8C\\u6210\\u6E32\\u67D3\\u7684\\u533A\\u57DF\\u8FDB\\u884C\\u6C34\\u5408\\uFF0C\\u800C\\u4E0D\\u9700\\u8981\\u548C\\u539F\\u6765\\u4E00\\u6837\\u7B49\\u5F85\\u6574\\u4E2A\\u9875\\u9762\\u52A0\\u8F7D\\u5B8C\\u6210\\u4EE5\\u53CA\\u6240\\u6709js\\u52A0\\u8F7D\\u5B8C\\u6210\\uFF0C\\u624D\\u80FD\\u5F00\\u59CB\\u6C34\\u5408\\u3002\"))), mdx(\"p\", null, \"\\u5728\\u8BB2\\u8FD9\\u4E24\\u4E2A\\u7279\\u6027\\u4E4B\\u524D\\uFF0C\\u5148\\u4E86\\u89E3\\u4E00\\u4E0B\\u65B0\\u7684\", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"Suspense\"), \"\\u7EC4\\u4EF6\\u3002\\u56E0\\u4E3A\\u5B83\\u4EEC\\u7684\\u5B9E\\u73B0\\u79BB\\u4E0D\\u5F00\", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"Suspense\"), \"\\u3002\"), mdx(\"h3\", null, \"Suspense\\u7EC4\\u4EF6\"), mdx(\"p\", null, \"\\u5728React18\\u4E4B\\u524D\\uFF0C\", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"Suspense\"), \"\\u7EC4\\u4EF6\\u7684\\u529F\\u80FD\\u5F88\\u5355\\u4E00\\uFF0C\\u6211\\u4EEC\\u4F7F\\u7528\\u5B83\\u7684\\u573A\\u666F\\u5C31\\u662F\\u548C\", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"React.lazy\"), \"\\u7EC4\\u5408\\uFF0C\\u6765\\u5B9E\\u73B0\", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"\\u4EE3\\u7801\\u62C6\\u5206\"), \"\\u548C\", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"\\u7EC4\\u4EF6\\u61D2\\u52A0\\u8F7D\"), \"\\u3002\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"javascript\"\n  }, mdx(\"pre\", {\n    parentName: \"div\",\n    \"className\": \"language-javascript\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-javascript\"\n  }, mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"import\"), \" React\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \" Suspense\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \" lazy \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"from\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"'react'\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"const\"), \" LazyComponent \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"=\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"lazy\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"=>\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"import\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"'./LazyComponent'\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"function\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"App\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"return\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), \"\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"<\"), \"Suspense fallback\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"=\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"<\"), \"div\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \">\"), \"Loading\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"...\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"<\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"/\"), \"div\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \">\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \">\"), \"\\n      \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"<\"), \"LazyComponent \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"/\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \">\"), \"\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"<\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"/\"), \"Suspense\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \">\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\")))), mdx(\"p\", null, \"\\u4F8B\\u5B50\\u4E2D\\uFF0C\", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"React.lazy\"), \" + \\u52A8\\u6001\\u5BFC\\u5165\\u8BED\\u6CD5\\uFF08\", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"() => import(/*...*/)\"), \"\\uFF09\\u8BA9\", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"LazyComponent\"), \"\\u7EC4\\u4EF6\\u7684\\u4EE3\\u7801\\u5728\\u6253\\u5305\\u65F6\\u88AB\\u5355\\u72EC\\u62CE\\u51FA\\u53BB\\u3002\\u5E76\\u5728\\u9700\\u8981\\u5230\\u8BE5\\u7EC4\\u4EF6\\u65F6\\uFF0C\\u624D\\u53BB\\u52A0\\u8F7D\\u5BF9\\u5E94\\u7684\\u7EC4\\u4EF6\\u4EE3\\u7801\\u3002\", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"Suspense\"), \"\\u7EC4\\u4EF6\\u4F1A\\u5728\\u8BE5\\u7EC4\\u4EF6\\u4EE3\\u7801\\u6CA1\\u6709\\u88AB\\u52A0\\u8F7D\\u5B8C\\u6210\\u524D\\uFF0C\\u5C55\\u793Afallback\\u4E2D\\u7684\\u5907\\u7528\\u7EC4\\u4EF6\\u3002\"), mdx(\"p\", null, \"\\u5728React18\\u7684\\u5E76\\u53D1\\u7279\\u6027\\u4E0B\\uFF0C\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://react.dev/reference/react/Suspense\",\n    \"target\": \"_blank\",\n    \"rel\": \"nofollow noopener noreferrer\"\n  }, \"Suspense\\u7EC4\\u4EF6\"), \"\\u5F97\\u5230\\u4E86\\u8BF8\\u591A\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://react.dev/blog/2022/03/29/react-v18#new-suspense-features\",\n    \"target\": \"_blank\",\n    \"rel\": \"nofollow noopener noreferrer\"\n  }, \"\\u589E\\u5F3A\\u7279\\u6027\"), \"\\u3002\\u5B83\\u7684\\u5B9A\\u4E49\\u6539\\u4E3A\\uFF1A\", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"\\u5728\\u7EC4\\u4EF6\\u6811\\u4E2D\\uFF0C\\u5982\\u679C\\u67D0\\u4E00\\u90E8\\u5206\\u8FD8\\u6CA1\\u51C6\\u5907\\u597D\\u88AB\\u663E\\u793A\\u51FA\\u6765\\uFF0C\", mdx(\"code\", {\n    parentName: \"strong\",\n    \"className\": \"language-text\"\n  }, \"Suspense\"), \"\\u53EF\\u4EE5\\u8BA9\\u4F60\\u6307\\u5B9A\\u5B83\\u7684loading\\u72B6\\u6001\\u3002\"), \"\\u53EF\\u4EE5\\u770B\\u51FA\\u6765\\uFF0C\\u5B83\\u5305\\u542B\\u4E86\\u4E4B\\u524D\\u7684\\u80FD\\u529B\\uFF0C\\u4F46\\u662F\\u660E\\u663E\\u8303\\u56F4\\u66F4\\u5927\\uFF08\\u6CA1\\u52A0\\u8F7D\\u5B8C\\u6210=>\\u6CA1\\u51C6\\u5907\\u597D\\u663E\\u793A\\uFF09\\u3002\"), mdx(\"p\", null, \"Suspense\\u7684\\u5168\\u90E8\\u65B0\\u7279\\u6027\\uFF0C\\u4EE5\\u53CA\\u539F\\u7406\\u3001\\u5347\\u7EA7\\u539F\\u56E0\\uFF0C\\u8BE6\\u7EC6\\u53EF\\u4EE5\\u770B\\u4E00\\u4E0B\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/reactjs/rfcs/blob/main/text/0213-suspense-in-react-18.md\",\n    \"target\": \"_blank\",\n    \"rel\": \"nofollow noopener noreferrer\"\n  }, \"Suspense\\u529F\\u80FD\\u7684RFC\"), \"\\u3002\\u8FD9\\u91CC\\u5C31\\u4E0D\\u518D\\u8D58\\u8FF0\\u3002\"), mdx(\"p\", null, \"\\u8FD9\\u91CC\\u91CD\\u70B9\\u5173\\u6CE8\\u4E00\\u4E0B\\u4E0ESSR\\u6709\\u5173\\u7684\\u65B0\\u7279\\u6027\\uFF0C\\u4E4B\\u524D\", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"Suspense\"), \"\\u65E0\\u6CD5\\u5E94\\u7528\\u4E8ESSR\\u3002\\u800C\\u5728React18\\u4F7F\\u7528\", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"renderToPipeableStream\"), \"\\u8FD9\\u4E2A\\u65B0\\u7684SSR\\u6E32\\u67D3\\u5668\\u7684\\u8BDD\\uFF0C\\u5B83\\u53EF\\u4EE5\\u4E0ESuspense\\u96C6\\u6210\\uFF1A\", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"\\u65B0\\u6E32\\u67D3\\u5668\\u521B\\u5EFA\\u4E00\\u4E2Astream\\u6765\\u53D1\\u9001html\\u5230\\u5BA2\\u6237\\u7AEF\\uFF0CSSR\\u8FC7\\u7A0B\\u4E2D\\uFF0C\\u5F53\\u4F7F\\u7528\", mdx(\"code\", {\n    parentName: \"strong\",\n    \"className\": \"language-text\"\n  }, \"Suspense\"), \"\\u5305\\u88F9\\u7684\\u8FD9\\u90E8\\u5206\\u7EC4\\u4EF6\\u6811\\u8FD8\\u6CA1\\u51C6\\u5907\\u597D\\u6E32\\u67D3\\u65F6\\uFF0C\\u53EF\\u4EE5\\u5148\\u53D1\\u9001fallback\\u7684\\u5185\\u5BB9\\u3002\\u5F53\\u8FD9\\u90E8\\u5206\\u7EC4\\u4EF6\\u51C6\\u5907\\u597D\\u540E\\uFF0CReact\\u4F1A\\u5728\\u5F53\\u524D\\u6D41\\u4E2D\\uFF0C\\u53D1\\u9001html\\u548C\\u5185\\u8054script\\u811A\\u672C\\u5230\\u5BA2\\u6237\\u7AEF\\uFF0C\\u6765\\u5C06\\u5BA2\\u6237\\u7AEF\\u7684dom\\u4FEE\\u6B63\\u3002\"), \"\\u8FD9\\u4E00\\u90E8\\u5206\\u90FD\\u662FSSR\\u5B9E\\u73B0\\u7684\\uFF0C\\u5373\\u4F7F\\u5BA2\\u6237\\u7AEFjs\\u5B8C\\u5168\\u6CA1\\u6709\\u6267\\u884C\\uFF0C\\u4E5F\\u4E0D\\u5F71\\u54CD\\u3002\"), mdx(\"h3\", null, \"\\u6D41\\u5F0F\\u4F20\\u8F93Html\"), mdx(\"p\", null, \"\\u4E0A\\u9762\\u63D0\\u5230\", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"renderToPipeableStream\"), \"\\u521B\\u5EFA\\u4E00\\u4E2Astream\\u6765\\u53D1\\u9001html\\u5230\\u5BA2\\u6237\\u7AEF\\u3002\\u8FD9\\u4E2A\\u662F\\u600E\\u4E48\\u5B9E\\u73B0\\u7684\\u5462\\uFF1F\"), mdx(\"p\", null, \"\\u6269\\u5C55\\u4E00\\u4E0B\\uFF0C\\u670D\\u52A1\\u7AEF\\u53D1\\u9001\\u6D41\\u5F0F\\u6570\\u636E\\u5230\\u5BA2\\u6237\\u7AEF\\u6709\\u4E09\\u79CD\\u65B9\\u5F0F\\uFF1A\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Server-Send Events\"), \"\\uFF1ASSE\\u662F\\u4E00\\u79CD\\u670D\\u52A1\\u5668\\u63A8\\u9001\\u6280\\u672F\\uFF0C\\u5141\\u8BB8\\u670D\\u52A1\\u5668\\u5411\\u5BA2\\u6237\\u7AEF\\u53D1\\u9001\\u4E8B\\u4EF6\\u3002\\u901A\\u8FC7\\u8BBE\\u7F6E\\u8BF7\\u6C42\\u5934\", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"Content-Type: text/event-stream\"), \"\\uFF0C\\u8BF7\\u6C42\\u4F53\\u53D1\\u9001\\u4E8C\\u8FDB\\u5236\\u6D41\\u5B9E\\u73B0\\u3002\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"\\u5206\\u5757\\u4F20\\u8F93\\uFF08Chunked Transfer Encoding\\uFF09\"), \"\\uFF1A\\u53EF\\u4EE5\\u5C06\\u4E0D\\u786E\\u5B9A\\u5185\\u5BB9\\u957F\\u5EA6\\u7684\\u6570\\u636E\\u5757\\uFF0C\\u5206\\u591A\\u6B21\\u7684\\u4F20\\u8F93\\u7ED9\\u5BA2\\u6237\\u7AEF\\uFF0C\\u901A\\u8FC7\\u8BBE\\u7F6E\", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"Transfer-Encoding: chunked\"), \"\\uFF0C\\u8BF7\\u6C42\\u4F53\\u53D1\\u9001\\u4E8C\\u8FDB\\u5236\\u6D41\\u5B9E\\u73B0\\u3002\\u4E0ESSE\\u7684\\u533A\\u522B\\u662FSSE\\u4E3B\\u8981\\u7528\\u4E8E\\u53D1\\u9001\\u4E8B\\u4EF6\\u3002\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"WebSocket\"), \"\\uFF1A\\u4E00\\u79CD\\u670D\\u52A1\\u5668\\u548C\\u5BA2\\u6237\\u7AEF\\u7684\\u53CC\\u5411\\u901A\\u4FE1\\u534F\\u8BAE\\u3002\\u7528\\u6765\\u5B9E\\u73B0\\u5B9E\\u65F6\\u901A\\u4FE1\\u3002\\u4E0ESSE\\u7684\\u533A\\u522B\\u662FSSE\\u4E0D\\u652F\\u6301\\u5BA2\\u6237\\u7AEF\\u53D1\\u9001\\u4E8B\\u4EF6\\u5230\\u670D\\u52A1\\u7AEF\\u3002\"))), mdx(\"p\", null, \"\\u65B0\\u6E32\\u67D3\\u5668\\u770B\\u8D77\\u6765\\u5F88\\u9002\\u5408\\u4F7F\\u7528\\u5206\\u5757\\u4F20\\u8F93\\u7684\\u65B9\\u5F0F\\u53D1\\u9001html\\uFF0C\\u56E0\\u4E3Ahtml\\u5185\\u5BB9\\u662F\\u4E0D\\u786E\\u5B9A\\u7684\\uFF0C\\u968F\\u7740\\u6E32\\u67D3\\u8FC7\\u7A0B\\u7684\\u8FDB\\u884C\\u624D\\u6162\\u6162\\u786E\\u5B9A\\u3002\\u5B9E\\u9645\\u4E0AReact\\u4E5F\\u662F\\u4F7F\\u7528\\u7684\\u5206\\u5757\\u4F20\\u8F93\\u6280\\u672F\\u3002\\u5F88\\u7B80\\u5355\\uFF0C\\u5199\\u4E2A\\u63A5\\u53E3\\u6D4B\\u8BD5\\u4E00\\u4E0B\\uFF1A\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"javascript\"\n  }, mdx(\"pre\", {\n    parentName: \"div\",\n    \"className\": \"language-javascript\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-javascript\"\n  }, \"router\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \".\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"get\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"\\\"/streaming\\\"\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"async\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token parameter\"\n  }, \"ctx\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"=>\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n  ctx\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \".\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"set\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"\\\"content-type\\\"\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"\\\"text/html\\\"\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n  ctx\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \".\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"set\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"\\\"transfer-encoding\\\"\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"\\\"chunked\\\"\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n  ctx\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \".\"), \"status \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"=\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token number\"\n  }, \"200\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token comment\"\n  }, \"// \\u53D1\\u9001\\u7B2C\\u4E00\\u6BB5html\"), \"\\n  ctx\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \".\"), \"res\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \".\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"write\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"\\\"<!DOCTYPE html><html><head><title>Streaming</title></head><body><div id='app'><p>First Segment</p>\\\"\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token comment\"\n  }, \"// \\u5EF6\\u8FDF3\\u79D2\\u65B9\\u4FBF\\u770B\\u6548\\u679C\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"await\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"new\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token class-name\"\n  }, \"Promise\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token parameter\"\n  }, \"resolve\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"=>\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"setTimeout\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), \"resolve\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token number\"\n  }, \"3000\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token comment\"\n  }, \"// \\u53D1\\u9001\\u7B2C\\u4E8C\\u6BB5html\"), \"\\n  ctx\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \".\"), \"res\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \".\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"write\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"\\\"<p>Second Segment</p></div></body></html>\\\"\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n  ctx\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \".\"), \"res\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \".\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"end\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\")))), mdx(\"p\", null, \"\\u6D4F\\u89C8\\u5668\\u4E0A\\u76F4\\u63A5\\u8C03\\u7528\\u8BE5\\u63A5\\u53E3\\uFF0C\\u67E5\\u770B\\u6E32\\u67D3\\u51FA\\u6765\\u7684\\u9875\\u9762\\u5982\\u4E0B\\uFF1A\"), mdx(\"video\", {\n    src: \"/leon-blog/ad52ee4085d7c556a306a178eb0a1397/react-ssr-streaming.mov\",\n    width: \"100%\",\n    autoPlay: true,\n    muted: true,\n    loop: true\n  }), mdx(\"p\", null, \"\\u53EF\\u4EE5\\u770B\\u5230\\uFF0C\\u73B0\\u4EE3\\u6D4F\\u89C8\\u5668\\u5BF9\\u5206\\u5757\\u4F20\\u8F93\\u7684html\\u652F\\u6301\\u8FD8\\u662F\\u5F88\\u597D\\u7684\\uFF0C\\u5373\\u4F7Fhtml\\u5185\\u5BB9\\u4E0D\\u5168\\uFF0C\\u4E5F\\u81EA\\u52A8\\u8865\\u5168\\u4E86\\u3002\\u5E76\\u5728\\u540E\\u4E00\\u6BB5\\u53D1\\u9001\\u8FC7\\u6765\\u65F6\\u8FFD\\u52A0\\u4E0A\\u53BB\\u3002\\u6574\\u4E2A\\u8FC7\\u7A0B\\u9875\\u9762\\u663E\\u793A\\u5F88\\u5E73\\u6ED1\\u3002\"), mdx(\"h3\", null, \"\\u6D41\\u5F0FHTML + Suspense\"), mdx(\"p\", null, \"\\u57FA\\u4E8E\\u6B64\\uFF0CReact\\u4E2D\\u5728\\u670D\\u52A1\\u5668\\u7AEF\\u53C8\\u662F\\u600E\\u4E48\\u533A\\u5206\\u54EA\\u4E9B\\u9700\\u8981\\u5206\\u5757\\u53BB\\u4F20\\u8F93\\u5462\\uFF1F\\u7B54\\u6848\\u662F\", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"Suspense\"), \"\\u3002\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"\\u6570\\u636E\\u83B7\\u53D6\\u5BFC\\u81F4\\u7684Suspense\")), mdx(\"p\", null, \"\\u76F4\\u63A5\\u62FF\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://codesandbox.io/p/sandbox/kind-sammet-j56ro\",\n    \"target\": \"_blank\",\n    \"rel\": \"nofollow noopener noreferrer\"\n  }, \"\\u5B98\\u65B9demo\"), \"\\u6765\\u8BF4\\uFF08\\u53EF\\u4EE5\\u81EA\\u5DF1fork\\u540E\\u8FD0\\u884C\\uFF0C\\u5982\\u679C\\u4E0D\\u884C\\u5C31\\u4E0B\\u8F7D\\u5230\\u672C\\u5730\\uFF09\\u3002\\u4E3B\\u8981\\u7684\\u7EC4\\u4EF6\\u7ED3\\u6784\\u5982\\u4E0B\\uFF1A\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"jsx\"\n  }, mdx(\"pre\", {\n    parentName: \"div\",\n    \"className\": \"language-jsx\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-jsx\"\n  }, mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"<\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token class-name\"\n  }, \"Layout\")), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \">\")), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token plain-text\"\n  }, \"\\n  \"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"<\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token class-name\"\n  }, \"NavBar\")), \" \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"/>\")), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token plain-text\"\n  }, \"\\n  \"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"<\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token class-name\"\n  }, \"Sidebar\")), \" \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"/>\")), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token plain-text\"\n  }, \"\\n  \"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"<\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token class-name\"\n  }, \"RightPane\")), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \">\")), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token plain-text\"\n  }, \"\\n    \"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"<\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token class-name\"\n  }, \"Post\")), \" \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"/>\")), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token plain-text\"\n  }, \"\\n    \"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"<\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token class-name\"\n  }, \"Suspense\")), \" \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token attr-name\"\n  }, \"fallback\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token script language-javascript\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token script-punctuation punctuation\"\n  }, \"=\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"<\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token class-name\"\n  }, \"Spinner\")), \" \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"/>\")), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"}\")), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \">\")), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token plain-text\"\n  }, \"\\n      \"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"<\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token class-name\"\n  }, \"Comments\")), \" \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"/>\")), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token plain-text\"\n  }, \"\\n    \"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"</\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token class-name\"\n  }, \"Suspense\")), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \">\")), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token plain-text\"\n  }, \"\\n  \"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"</\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token class-name\"\n  }, \"RightPane\")), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \">\")), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token plain-text\"\n  }, \"\\n\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"</\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token class-name\"\n  }, \"Layout\")), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \">\"))))), mdx(\"p\", null, \"\\u9875\\u9762\\u5305\\u542B\\u9876\\u90E8\\u5BFC\\u822A\\u3001\\u5DE6\\u4FA7\\u4FA7\\u8FB9\\u680F\\u3001\\u53F3\\u4FA7\\u5185\\u5BB9\\u533A\\uFF0C\\u53F3\\u4FA7\\u5185\\u5BB9\\u533A\\u5305\\u542B\\u4E0A\\u9762\\u7684Post\\u5185\\u5BB9\\uFF0C\\u548C\\u7528Suspense\\u5305\\u88F9\\u7684Comments\\u8BC4\\u8BBA\\u5217\\u8868\\u3002\\u5982\\u56FE\\uFF1A\"), mdx(\"img\", {\n    \"src\": \"assets/react-ssr-demo1.jpg\",\n    \"alt\": null\n  }), mdx(\"p\", null, \"Comments\\u9700\\u8981\\u4E00\\u4E2A\\u8017\\u65F6\\u7684\\u83B7\\u53D6\\u6570\\u636E\\u7684\\u64CD\\u4F5C\\uFF0C\\u6240\\u4EE5\\u4F7F\\u7528Suspense\\u5305\\u88F9\\u3002\\u5E76\\u4E14\\u5728SSR\\u9996\\u6B21\\u5DE5\\u4F5C\\u5230\\u8FD9\\u91CC\\u65F6\\uFF0C\\u7531\\u4E8EComments\\u6CA1\\u6709\\u83B7\\u53D6\\u5B8C\\u6210\\u6570\\u636E\\uFF0C\\u6240\\u4EE5\\u5B83\\u6CA1\\u6709\\u51C6\\u5907OK\\u3002Suspense\\u5C06fallback\\u7684\\u7EC4\\u4EF6\\u63D0\\u4EA4\\u51FA\\u53BB\\u3002\\u6700\\u7EC8SSR\\u9996\\u6B21\\u63D0\\u4EA4\\u5230\\u5BA2\\u6237\\u7AEF\\u7684stream Html\\u5982\\u4E0B\\uFF1A\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"html\"\n  }, mdx(\"pre\", {\n    parentName: \"div\",\n    \"className\": \"language-html\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-html\"\n  }, mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"<\"), \"main\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \">\")), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"<\"), \"nav\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \">\")), \"\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token comment\"\n  }, \"<!--NavBar -->\"), \"\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"<\"), \"a\"), \" \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token attr-name\"\n  }, \"href\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token attr-value\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation attr-equals\"\n  }, \"=\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"\\\"\"), \"/\", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"\\\"\")), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \">\")), \"Home\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"</\"), \"a\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \">\")), \"\\n   \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"</\"), \"nav\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \">\")), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"<\"), \"aside\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \">\")), \"\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token comment\"\n  }, \"<!-- Sidebar -->\"), \"\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"<\"), \"a\"), \" \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token attr-name\"\n  }, \"href\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token attr-value\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation attr-equals\"\n  }, \"=\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"\\\"\"), \"/profile\", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"\\\"\")), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \">\")), \"Profile\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"</\"), \"a\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \">\")), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"</\"), \"aside\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \">\")), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"<\"), \"article\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \">\")), \"\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token comment\"\n  }, \"<!-- Post -->\"), \"\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"<\"), \"p\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \">\")), \"Hello world\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"</\"), \"p\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \">\")), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"</\"), \"article\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \">\")), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"<\"), \"section\"), \" \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token attr-name\"\n  }, \"id\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token attr-value\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation attr-equals\"\n  }, \"=\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"\\\"\"), \"comments-spinner\", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"\\\"\")), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \">\")), \"\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token comment\"\n  }, \"<!-- Spinner -->\"), \"\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"<\"), \"img\"), \" \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token attr-name\"\n  }, \"width\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token attr-value\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation attr-equals\"\n  }, \"=\"), \"400\"), \" \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token attr-name\"\n  }, \"src\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token attr-value\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation attr-equals\"\n  }, \"=\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"\\\"\"), \"spinner.gif\", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"\\\"\")), \" \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token attr-name\"\n  }, \"alt\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token attr-value\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation attr-equals\"\n  }, \"=\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"\\\"\"), \"Loading...\", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"\\\"\")), \" \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"/>\")), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"</\"), \"section\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \">\")), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"</\"), \"main\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \">\"))))), mdx(\"img\", {\n    \"src\": \"assets/react-ssr-demo2.jpg\",\n    \"alt\": null\n  }), mdx(\"p\", null, \"\\u63A5\\u7740\\uFF0C\\u5F53Comments\\u7EC8\\u4E8E\\u5B8C\\u6210\\u4E86\\u81EA\\u5DF1\\u7684\\u6E32\\u67D3\\u3002\", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"React\\u5C06\\u53D1\\u9001\\u53E6\\u4E00\\u6BB5html\\u5E76\\u5305\\u542B\\u4E00\\u6BB5\\u5185\\u8054js\\u811A\\u672C\\uFF0C\\u6765\\u5C06\\u65B0\\u7684\\u5185\\u5BB9\\u66FF\\u6362\\u5230Spinner\\u7684\\u4F4D\\u7F6E\\u3002\")), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"html\"\n  }, mdx(\"pre\", {\n    parentName: \"div\",\n    \"className\": \"language-html\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-html\"\n  }, mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token comment\"\n  }, \"<!-- \\u5B9E\\u9645\\u7684Comment\\u7EC4\\u4EF6\\u5185\\u5BB9 -->\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"<\"), \"div\"), \" \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token attr-name\"\n  }, \"hidden\"), \" \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token attr-name\"\n  }, \"id\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token attr-value\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation attr-equals\"\n  }, \"=\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"\\\"\"), \"comments\", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"\\\"\")), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \">\")), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"<\"), \"p\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \">\")), \"First comment\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"</\"), \"p\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \">\")), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"<\"), \"p\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \">\")), \"Second comment\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"</\"), \"p\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \">\")), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"</\"), \"div\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \">\")), \"\\n\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"<\"), \"script\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \">\")), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token script\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token language-javascript\"\n  }, \"\\n  \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token comment\"\n  }, \"// \\u975E\\u5E38\\u7B80\\u5316\\u7684\\u5B9E\\u73B0\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token keyword\"\n  }, \"const\"), \" commentsDiv \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token operator\"\n  }, \"=\"), \" document\", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \".\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token function\"\n  }, \"getElementById\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token string\"\n  }, \"'comments'\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n  document\", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \".\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token function\"\n  }, \"getElementById\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token string\"\n  }, \"'sections-spinner'\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \".\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token function\"\n  }, \"replaceChildren\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), \"commentsDiv\", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n\\n  commentsDiv\", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \".\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token function\"\n  }, \"_reactRetry\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n\")), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"</\"), \"script\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \">\"))))), mdx(\"p\", null, \"\\u540C\\u65F6\\u6CE8\\u610F\\u5230\\u6700\\u540E\\u4E00\\u53E5\", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"commentsDiv._reactRetry()\"), \"\\uFF0C\\u662F\\u4E3A\\u4E86\\u91CD\\u542FComment\\u7EC4\\u4EF6\\u6240\\u5C5E\\u7684\", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"Suspense\"), \"\\u8FB9\\u754C\\u7684\\u6E32\\u67D3\\u4EFB\\u52A1\\u3002\\u540E\\u9762\\u8BB2\\u5230\", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"\\u9009\\u62E9\\u6027\\u6C34\\u5408\"), \"\\u65F6\\u4F1A\\u8BB2\\u89E3\\u3002\"), mdx(\"p\", null, \"\\u7531\\u6B64\\u53EF\\u89C1\\uFF0C\\u6211\\u4EEC\\u5728\\u7EC4\\u4EF6\\u6811\\u4E2D\\u4E5F\\u53EF\\u4EE5\\u63D2\\u5165\\u4EFB\\u610F\\u591A\\u4E2ASuspense\\u7684\\u7EC4\\u4EF6\\uFF0C\\u8FD9\\u4E9B\\u7EC4\\u4EF6\\u4F1A\\u5728\\u81EA\\u5DF1\\u5185\\u5BB9\\u51C6\\u5907OK\\u7684\\u65F6\\u5019\\uFF0C\\u72EC\\u7ACB\\u7684\\u53D1\\u9001\\u4E00\\u6BB5html\\u53CAjs\\u5230\\u5BA2\\u6237\\u7AEF\\u4EE5\\u5B8C\\u6210\\u201C\\u4FEE\\u6B63\\u201D\\u3002\\u5B83\\u4EEC\\u4E0D\\u662F\\u81EA\\u4E0A\\u800C\\u4E0B\\u7684\\uFF0C\\u4E0B\\u9762\\u7684\\u65E0\\u9700\\u7B49\\u5F85\\u4E0A\\u9762\\u7684\\u7EC4\\u4EF6\\u6E32\\u67D3\\u5B8C\\u6210\\u3002\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"\\u7531\\u4E8ESuspense\\u5FC5\\u987B\\u8981\\u77E5\\u9053\\u7EC4\\u4EF6\\u6570\\u636E\\u51C6\\u5907OK\\u7684\\u65F6\\u673A\\uFF0C\\u6240\\u4EE5\\u6570\\u636E\\u83B7\\u53D6\\u903B\\u8F91\\u5FC5\\u987B\\u8981\\u4E0ESuspense\\u6253\\u901A\\u3002\\u4F46\\u662F\\u5230\\u76EE\\u524D\\u4E3A\\u6B62\\uFF0CReact\\u8FD8\\u6CA1\\u6709\\u63D0\\u4F9B\\u66F4\\u5408\\u9002\\u7684\\u65B9\\u5F0F\\u6765\\u6253\\u901A\\u5B83\\u4EEC\\u3002\\u5B98\\u65B9\\u63A8\\u8350\\u4F7F\\u7528Server Components\\uFF08\\u76EE\\u524D\\u4ECD\\u662F\\u5B9E\\u9A8C\\u6027\\u7684\\uFF09\\u6216\\u8005\\u662F\\u4E09\\u65B9\\u7684\\u6846\\u67B6\\u5982\", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Next.js\"), \"\\u3001\", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Relay\"), \"\\u7B49\\uFF0C\\u5B83\\u4EEC\\u53EF\\u80FD\\u4F1A\\u63D0\\u4F9B\\u5BF9\\u5E94\\u7684\\u5C01\\u88C5\\u3002\", mdx(\"br\", null), \"\\n\\u67E5\\u770B\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://codesandbox.io/p/devbox/kind-sammet-j56ro?file=%2Fserver%2Frender.js%3A66%2C15\",\n    \"target\": \"_blank\",\n    \"rel\": \"nofollow noopener noreferrer\"\n  }, \"\\u5B98\\u65B9\\u7684\\u793A\\u4F8B\"), \"\\uFF0C\\u5B83\\u80FD\\u5B9E\\u73B0\\u4E0A\\u8FF0\\u6548\\u679C\\uFF0C\\u539F\\u7406\\u662F\\u7EC4\\u4EF6\\u5728\\u8BF7\\u6C42\\u6570\\u636E\\u65F6\\u629B\\u51FA\\u4E00\\u4E2A\", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"Promise\"), \"\\uFF0C\\u8FD9\\u4E2A\\u629B\\u51FA\\u7684\", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"Promise\"), \"\\u4F1A\\u88AB\\u4E0A\\u65B9\\u7684\", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"Suspense\"), \"\\u7EC4\\u4EF6\\u6355\\u83B7\\uFF0C\\u6B64\\u65F6Suspense\\u7EC4\\u4EF6\\u5C31\\u4F1A\\u8BA4\\u4E3A\\u5B50\\u6811\\u8FD8\\u672A\\u51C6\\u5907\\u597D\\u663E\\u793A\\uFF0C\\u5C31\\u4F1A\\u8F93\\u51FA\", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"fallback\"), \"\\u7684\\u5185\\u5BB9\\uFF0C\\u4ECE\\u800C\\u8BA9SSR\\u7EE7\\u7EED\\u3002\\u5F53\\u8FD9\\u4E2A\", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"Promise\"), \"\\u88AB\\u89E3\\u51B3\\uFF08resolve\\uFF09\\u65F6\\uFF0C\", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"Suspense\"), \"\\u4F1A\\u91CD\\u65B0\\u6E32\\u67D3\\u5B50\\u6811\\u3002\", mdx(\"span\", {\n    style: {\n      \"color\": \"#ff8900\"\n    }\n  }, \"\\u6CE8\\u610F\\uFF1A\\u8FD9\\u4E2A\\u65B9\\u6CD5\\u53EA\\u662F\\u4E3A\\u4E86\\u6F14\\u793A\\u4F7F\\u7528\\uFF0C\\u4E0D\\u80FD\\u7528\\u4E8E\\u751F\\u4EA7\\u9632\\u6B62\\u610F\\u5916\\u60C5\\u51B5\\uFF01\"))), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"\\u4EE3\\u7801\\u5206\\u5305\\u5BFC\\u81F4\\u7684Suspense\")), mdx(\"p\", null, \"React18\\u4E4B\\u524D\\uFF0C\", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"React.lazy\"), \"\\u65E0\\u6CD5\\u5E94\\u7528\\u4E8ESSR\\u5B9E\\u73B0\\u4EE3\\u7801\\u5206\\u5305\\uFF0C\\u5982\\u679C\\u4E4B\\u524D\\u5E0C\\u671BSSR\\u7684\\u540C\\u65F6\\uFF0C\\u5BA2\\u6237\\u7AEF\\u8FD8\\u80FD\\u4EE3\\u7801\\u5206\\u5305\\u3002\\u90A3\\u5C31\\u53EA\\u80FD\\u5C06\\u9700\\u8981\\u4EE3\\u7801\\u5206\\u5305\\u7684\\u7EC4\\u4EF6\\u4ECESSR\\u79FB\\u9664\\uFF0C\\u5E76\\u4E14\\u5728\\u5BA2\\u6237\\u7AEFHydration\\u4E4B\\u524D\\u52A0\\u8F7D\\u8FD9\\u4E9Bjs\\u3002\\u90A3\\u4EE3\\u7801\\u5206\\u5305\\u7684\\u610F\\u4E49\\u4F55\\u5728\\u5462\\uFF1F\"), mdx(\"p\", null, \"\\u4F46\\u73B0\\u5728\\u4E0D\\u5B58\\u5728\\u8FD9\\u4E2A\\u95EE\\u9898\\u4E86\\u3002\\u7528\\u6CD5\\u662F\\u4E00\\u6837\\u7684\\uFF0C\\u6BD4\\u5982\\u6211\\u4EEC\\u5C06\", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"SideBar\"), \"\\u7EC4\\u4EF6\\u61D2\\u52A0\\u8F7D\\uFF1A\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"jsx\"\n  }, mdx(\"pre\", {\n    parentName: \"div\",\n    \"className\": \"language-jsx\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-jsx\"\n  }, mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"import\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \" lazy \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"from\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"'react'\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"const\"), \" Sidebar \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"=\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"lazy\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"=>\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"import\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"'./Sidebar'\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token comment\"\n  }, \"// ...\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"<\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token class-name\"\n  }, \"Suspense\")), \" \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token attr-name\"\n  }, \"fallback\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token script language-javascript\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token script-punctuation punctuation\"\n  }, \"=\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"<\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token class-name\"\n  }, \"Spinner\")), \" \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"/>\")), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"}\")), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \">\")), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token plain-text\"\n  }, \"\\n  \"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"<\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token class-name\"\n  }, \"Sidebar\")), \" \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"/>\")), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token plain-text\"\n  }, \"\\n\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"</\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token class-name\"\n  }, \"Suspense\")), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \">\")), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token comment\"\n  }, \"// ...\")))), mdx(\"p\", null, \"\\u6B64\\u65F6\\uFF0C\\u7531\\u4E8E\", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"SideBar\"), \"\\u7EC4\\u4EF6\\u61D2\\u52A0\\u8F7D\\u3002\\u9996\\u6B21SSR\\u6E32\\u67D3\\u65F6\\uFF0C\\u5982\\u679C\\u7EC4\\u4EF6\\u672A\\u51C6\\u5907OK\\uFF0C\", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"Suspense\"), \"\\u4F1A\\u8F93\\u51FAfallback\\u5185\\u5BB9\\uFF0C\\u76F4\\u5230\", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"SideBar\"), \"\\u7EC4\\u4EF6\\u52A0\\u8F7D\\u5B8C\\u6210\\u518D\\u53D1\\u9001\\u65B0\\u7684\\u5185\\u5BB9\\u3002\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"\\u6D41\\u5F0FSSR\\u5B58\\u5728\\u964D\\u7EA7\\u903B\\u8F91\\uFF0C\\u5047\\u5982Suspense\\u8FB9\\u754C\\u5185\\u7684\\u7EC4\\u4EF6SSR\\u629B\\u51FA\\u5F02\\u5E38\\uFF0CSSR\\u5931\\u8D25\\u3002\\u90A3\\u4E48\\u5BA2\\u6237\\u7AEF\\u4F1A\\u63A5\\u7BA1\\u8FD9\\u90E8\\u5206\\u7EC4\\u4EF6\\u6E32\\u67D3\\u903B\\u8F91\\u3002\")), mdx(\"h3\", null, \"\\u9009\\u62E9\\u6027\\u6C34\\u5408 + Suspense\"), mdx(\"p\", null, \"React18\\u4E4B\\u540E\\uFF0C\\u5BA2\\u6237\\u7AEF\\u652F\\u6301\\u4E86\\u9009\\u62E9\\u6027\\u6C34\\u5408\\uFF0C\\u4E0D\\u518D\\u9700\\u8981\\u7B49\\u5F85html\\u53CA\\u6240\\u6709\\u7EC4\\u4EF6\\u52A0\\u8F7D\\u5B8C\\u6210\\u540E\\u4E00\\u6B21\\u6027\\u7684\\u6267\\u884CHydration\\u8FC7\\u7A0B\\u3002\"), mdx(\"p\", null, \"\\u539F\\u7406\\u662F\\uFF1A\\u5BA2\\u6237\\u7AEF\\u5728\\u6267\\u884CHydration\\u9636\\u6BB5\\u65F6\\uFF0C\\u4F1A\\u5C06\\u90A3\\u4E9B\\u5DF2\\u7ECF\\u5B8C\\u6210\\u6E32\\u67D3\\u7684\\u7EC4\\u4EF6hydate\\uFF0C\\u4F7F\\u4E4B\\u53EF\\u4EE5\\u4EA4\\u4E92\\u3002\\u9047\\u5230\", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"Suspense\"), \"\\u7EC4\\u4EF6\\u65F6\\uFF0C\\u5224\\u65AD\\u5B83\\u7684\\u5B50\\u6811\\u662F\\u5426\\u5DF2\\u7ECF\\u5B8C\\u6210\\u4E86\\u6E32\\u67D3\\uFF0C\\u5982\\u679C\\u672A\\u5B8C\\u6210\\u5219\\u8DF3\\u8FC7hydrate\\u3002\\u7B49\\u5F85\\u7EC4\\u4EF6\\u6E32\\u67D3\\u5B8C\\u6210\\u540E\\uFF0C\\u518D\\u6062\\u590D\\u8FD9\\u90E8\\u5206\\u5B50\\u6811\\u7684hydrate\\u3002\"), mdx(\"p\", null, \"\\u5206\\u4E09\\u79CD\\u60C5\\u51B5\\u53BB\\u8BA8\\u8BBA\\uFF1A\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"1. \\u5BA2\\u6237\\u7AEF\\u52A0\\u8F7D\\u5B8C\\u6210\\uFF0C\\u5BA2\\u6237\\u7AEF\\u6C34\\u5408\\u65F6\\uFF0C\\u53D1\\u73B0\\u670D\\u52A1\\u7AEF\\u8FD8\\u5728\\u5206\\u6BB5\\u4F20\\u8F93\")), mdx(\"p\", null, \"\\u5E38\\u89C1\\u7684\\u60C5\\u51B5\\u5C31\\u662F\\u670D\\u52A1\\u7AEF\\u7EC4\\u4EF6\\u8FD8\\u5728\\u83B7\\u53D6\\u6570\\u636E\\u7B49\\u5F85\\u6E32\\u67D3\\uFF0C\\u800C\\u5BA2\\u6237\\u7AEFjs\\u90FD\\u5DF2\\u7ECF\\u5F00\\u59CB\\u6267\\u884C\\u4E86\\u3002\\u6B64\\u65F6\\u9009\\u62E9\\u6027\\u6C34\\u5408\\u4E0E\\u6D41\\u5F0FHTML\\u534F\\u4F5C\\uFF0C\\u4E0D\\u7BA1\\u662F\\u7531\\u4E8E\", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"\\u6570\\u636E\\u83B7\\u53D6\"), \"\\u8FD8\\u662F\", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"\\u4EE3\\u7801\\u5206\\u5305\"), \"\\u5BFC\\u81F4html\\u9700\\u8981\\u5206\\u6BB5\\u4F20\\u8F93\\uFF0C\\u90FD\\u6CA1\\u6709\\u5173\\u7CFB\\u3002\\u6C34\\u5408\\u65F6\\u4F1A\\u8DF3\\u8FC7\\u8FD9\\u4E9B\\u8FD8\\u6CA1\\u6709html\\u7684\\u7EC4\\u4EF6\\u3002\"), mdx(\"p\", null, \"\\u524D\\u9762\\u7684\\u4F8B\\u5B50\\u6211\\u4EEC\\u63D0\\u5230\\uFF0CComment\\u7EC4\\u4EF6\\u5728\\u83B7\\u53D6\\u5230\\u6570\\u636E\\uFF0C\\u5EF6\\u8FDF\\u7684\\u6E32\\u67D3\\u5B8C\\u6210\\u540E\\u91CD\\u65B0\\u53D1\\u9001\\u4E86\\u4E00\\u6BB5html\\u548C\\u5185\\u8054\\u811A\\u672C\\uFF0C\\u5185\\u8054\\u811A\\u672C\\u6700\\u540E\\u4E00\\u53E5\\u5C31\\u662F\\u8C03\\u7528dom\\u5143\\u7D20\\u4E0A\\u7684\", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"_reactRetry()\"), \"\\u3002\\u8FD9\\u4E2A\\u65B9\\u6CD5\\u5C31\\u662F\\u91CD\\u542F\", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"Suspense\"), \"\\u8FB9\\u754C\\u7684\\u6E32\\u67D3\\u4EFB\\u52A1\\u7684\\uFF0C\\u56E0\\u4E3A\\u8FD9\\u4E2A\\u8FB9\\u754C\\u5185\\u7684\\u5B50\\u6811\\u6709\\u53EF\\u80FD\\u5168\\u90E8\\u6E32\\u67D3\\u5B8C\\u6210\\u4E86\\u3002\\u6211\\u4EEC\\u641C\\u7D22\\u4E0B\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/facebook/react/blob/main/packages/react-reconciler/src/ReactFiberBeginWork.js#L2869\",\n    \"target\": \"_blank\",\n    \"rel\": \"nofollow noopener noreferrer\"\n  }, \"\\u6E90\\u7801\"), \"\\uFF0C\\u53D1\\u73B0\\u5B83\\u662F\\u5728beginWork\\u9636\\u6BB5\\u7ED1\\u5B9A\\u5230Suspense\\u7684dom\\u5143\\u7D20\\u4E0A\\u7684\\u3002\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"javascript\"\n  }, mdx(\"pre\", {\n    parentName: \"div\",\n    \"className\": \"language-javascript\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-javascript\"\n  }, mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token comment\"\n  }, \"// ReactFiberBeginWork.js\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"function\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"beginWork\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token parameter\"\n  }, \"current\", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \" workInProgress\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token comment\"\n  }, \"// ...\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"switch\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), \"workInProgress\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \".\"), \"tag\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token comment\"\n  }, \"// ...\"), \"\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"case\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token literal-property property\"\n  }, \"SuspenseComponent\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \"\\n      \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token comment\"\n  }, \"// ...\"), \"\\n      \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"updateSuspenseComponent\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token comment\"\n  }, \"// ...\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token comment\"\n  }, \"// ...\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), \"\\n\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"function\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"updateSuspenseComponent\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token comment\"\n  }, \"// ...\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"if\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token comment\"\n  }, \"/* ... */\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"updateDehydratedSuspenseComponent\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token comment\"\n  }, \"// ...\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), \"\\n\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"function\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"updateDehydratedSuspenseComponent\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token parameter\"\n  }, \"suspenseInstance\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token comment\"\n  }, \"// ...\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"if\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"isSuspenseInstancePending\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), \"suspenseInstance\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"const\"), \" retry \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"=\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"retryDehydratedSuspenseBoundary\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \".\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"bind\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"null\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \" current\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"registerSuspenseInstanceRetry\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), \"suspenseInstance\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \" retry\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"return\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"null\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token comment\"\n  }, \"// ...\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), \"\\n\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token comment\"\n  }, \"// ReactFiberConfigDOM.js\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"export\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"function\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"registerSuspenseInstanceRetry\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token literal-property property\"\n  }, \"instance\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" SuspenseInstance\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function-variable function\"\n  }, \"callback\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"=>\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"void\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n  instance\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \".\"), \"_reactRetry \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"=\"), \" callback\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\")))), mdx(\"p\", null, \"\\u603B\\u7ED3\\u4E00\\u4E0B\\uFF0C\", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"\\u5BA2\\u6237\\u7AEF\\u9009\\u62E9\\u6027\\u6C34\\u5408\\u65F6\\uFF0C\\u672A\\u52A0\\u8F7Dhtml\\u7684Suspense\\u7684\\u5B50\\u6811\\u4F1A\\u5EF6\\u8FDF\\u6C34\\u5408\\u3002\\u7B49\\u670D\\u52A1\\u7AEF\\u6D41\\u53D1\\u9001\\u8FD9\\u6BB5html\\u540E\\uFF0C\\u518D\\u53BB\\u91CD\\u542F\\u6E32\\u67D3\\u4EFB\\u52A1\\uFF0C\\u5B8C\\u6210\\u6C34\\u5408\\u3002\")), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"2. \\u670D\\u52A1\\u7AEF\\u6E32\\u67D3\\u5B8C\\u6210\\uFF0C\\u5BA2\\u6237\\u7AEF\\u6C34\\u5408\\u65F6\\uFF0C\\u53D1\\u73B0\\u7EC4\\u4EF6\\u4EE3\\u7801\\u8FD8\\u7F3A\\u5931\")), mdx(\"p\", null, \"\\u5E38\\u89C1\\u7684\\u60C5\\u51B5\\u5C31\\u662F\\u6211\\u4EEC\\u4E3A\\u4E86\\u4E0D\\u8BA9\\u4E00\\u6B21\\u6027\\u52A0\\u8F7D\\u7684js\\u8FC7\\u4E8E\\u5E9E\\u5927\\uFF0C\\u4F1A\\u9009\\u62E9\\u5C06\\u90E8\\u5206\\u7EC4\\u4EF6\\u8FDB\\u884C\", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"\\u4EE3\\u7801\\u5206\\u5305\"), \"\\u3002\\u5F53\\u670D\\u52A1\\u7AEF\\u6E32\\u67D3\\u5DF2\\u7ECF\\u5B8C\\u6210\\u65F6\\uFF0C\\u5BA2\\u6237\\u7AEF\\u5F00\\u59CB\\u6267\\u884C\\u6C34\\u5408\\uFF0C\\u53D1\\u73B0\\u90E8\\u5206\\u7EC4\\u4EF6\\u4EE3\\u7801\\u8FD8\\u6CA1\\u52A0\\u8F7D\\u3002\"), mdx(\"p\", null, \"\\u8FD9\\u5C31\\u662F\", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"\\u9009\\u62E9\\u6027\\u6C34\\u5408\"), \"\\u7684\\u53E6\\u4E00\\u4E2A\\u4F7F\\u7528\\u573A\\u666F\\u3002\\u4E0A\\u8282\\u4E2D\\u4EE3\\u7801\\u5206\\u5305\\u7684\\u4F8B\\u5B50\\u4E2D\\uFF0C\", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"SideBar\"), \"\\u7EC4\\u4EF6\\u4EE3\\u7801\\u5206\\u5305\\u3002\\u5F53\\u6C34\\u5408\\u65F6\\uFF0C\\u867D\\u7136\\u5B83\\u7684ssr\\u7684html\\u5DF2\\u7ECF\\u5B58\\u5728\\uFF0C\\u4F46\\u7531\\u4E8E\\u4EE3\\u7801\\u8FD8\\u6CA1\\u52A0\\u8F7D\\u5B8C\\u6210\\uFF0C\\u4ECD\\u7136\\u6807\\u8BB0\\u4E3A\\u672A\\u5B8C\\u6210\\u6E32\\u67D3\\u3002\\u5B83\\u5916\\u90E8\\u7684\", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"Suspense\"), \"\\u4F1A\\u8DF3\\u8FC7\\u5B83\\u3002\\u4ECE\\u800C\\u8BA9\\u5176\\u4ED6\\u90E8\\u5206\\u5148\\u53C2\\u4E0E\\u6C34\\u5408\\u3002\"), mdx(\"p\", null, \"\\u5F53\", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"SideBar\"), \"\\u7684\\u7EC4\\u4EF6\\u4EE3\\u7801\\u7EC8\\u4E8E\\u5B8C\\u6210\\u4E86\\u52A0\\u8F7D\\uFF0CReact\\u4F1A\\u91CD\\u65B0\\u6E32\\u67D3\\u5E76\\u5B8C\\u6210\\u8BE5\\u90E8\\u5206\\u7684Hydration\\u3002\"), mdx(\"p\", null, \"\\u5B83\\u7684\\u539F\\u7406\\u548C\\u524D\\u9762\\u300A\", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"\\u6570\\u636E\\u83B7\\u53D6\\u5BFC\\u81F4\\u7684Suspense\"), \"\\u300B\\u4E2D\\uFF0C\\u5B9E\\u73B0\\u6570\\u636E\\u83B7\\u53D6\\u548C\\u91CD\\u542F\\u6E32\\u67D3\\u539F\\u7406\\u6BD4\\u8F83\\u50CF\\u3002\", mdx(\"strong\", {\n    parentName: \"p\"\n  }, mdx(\"code\", {\n    parentName: \"strong\",\n    \"className\": \"language-text\"\n  }, \"React.lazy\"), \"\\u65B9\\u6CD5\\u4F1A\\u751F\\u6210\\u4E00\\u4E2A\", mdx(\"code\", {\n    parentName: \"strong\",\n    \"className\": \"language-text\"\n  }, \"LazyComponent\"), \"\\uFF0C\\u5728\", mdx(\"code\", {\n    parentName: \"strong\",\n    \"className\": \"language-text\"\n  }, \"beginWork\\u9636\\u6BB5\"), \"\\u4F1A\\u6302\\u8F7D\", mdx(\"code\", {\n    parentName: \"strong\",\n    \"className\": \"language-text\"\n  }, \"LazyComponent\"), \"\\uFF0C\\u8C03\\u7528\\u5176\", mdx(\"code\", {\n    parentName: \"strong\",\n    \"className\": \"language-text\"\n  }, \"_init\"), \"\\uFF08\", mdx(\"a\", {\n    parentName: \"strong\",\n    \"href\": \"https://github.com/facebook/react/blob/main/packages/react/src/ReactLazy.js#L53\",\n    \"target\": \"_blank\",\n    \"rel\": \"nofollow noopener noreferrer\"\n  }, \"\\u4EE3\\u7801\\u4F4D\\u7F6E\"), \"\\uFF09\\u65B9\\u6CD5\\uFF0C\\u4ECE\\u800C\\u5F00\\u59CB\\u52A0\\u8F7D\\u7EC4\\u4EF6\\uFF0C\\u5E76\\u629B\\u51FAPromise\\u3002\\u629B\\u51FA\\u7684Promise\\u4F1A\\u88AB\", mdx(\"code\", {\n    parentName: \"strong\",\n    \"className\": \"language-text\"\n  }, \"Suspense\"), \"\\u6355\\u83B7\\uFF0C\\u5E76\\u5728Promise\\u88AB\\u89E3\\u51B3\\u65F6\\uFF0C\\u91CD\\u65B0\\u6E32\\u67D3\"), \"\\u3002\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"javascript\"\n  }, mdx(\"pre\", {\n    parentName: \"div\",\n    \"className\": \"language-javascript\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-javascript\"\n  }, mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token comment\"\n  }, \"// ReactFiberBeginWork.js\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"function\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"beginWork\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token parameter\"\n  }, \"current\", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \" workInProgress\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token comment\"\n  }, \"// ...\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"switch\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), \"workInProgress\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \".\"), \"tag\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token comment\"\n  }, \"// ...\"), \"\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"case\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token literal-property property\"\n  }, \"LazyComponent\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \"\\n      \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token comment\"\n  }, \"// ...\"), \"\\n      \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"mountLazyComponent\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token comment\"\n  }, \"// ...\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token comment\"\n  }, \"// ...\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), \"\\n\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"function\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"mountLazyComponent\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token parameter\"\n  }, \"current\", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \" workInProgress\", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \" elementType\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token comment\"\n  }, \"// ...\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"const\"), \" lazyComponent \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"=\"), \" elementType\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"const\"), \" payload \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"=\"), \" lazyComponent\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \".\"), \"_payload\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"const\"), \" init \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"=\"), \" lazyComponent\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \".\"), \"_init\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token comment\"\n  }, \"// Lazy\\u7EC4\\u4EF6\\u6302\\u8F7D\\u65F6\\u5F00\\u59CB\\u52A0\\u8F7D\\u771F\\u5B9E\\u7EC4\\u4EF6\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"let\"), \" Component \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"=\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"init\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), \"payload\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token comment\"\n  }, \"// ...\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), \"\\n\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token comment\"\n  }, \"// ReactLazy.js\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"function\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"lazy\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function-variable function\"\n  }, \"ctor\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"=>\"), \" Promise\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"<\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"default\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token constant\"\n  }, \"T\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \">\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"return\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token literal-property property\"\n  }, \"_payload\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n      \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token literal-property property\"\n  }, \"_status\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"-\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token number\"\n  }, \"1\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n      \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token literal-property property\"\n  }, \"_result\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" ctor\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function-variable function\"\n  }, \"_init\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"function\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"lazyInitializer\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token parameter\"\n  }, \"payload\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n      \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"const\"), \" ctor \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"=\"), \" payload\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \".\"), \"_result\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n      \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token comment\"\n  }, \"// \\u5F00\\u59CB\\u52A0\\u8F7D\\u7EC4\\u4EF6\"), \"\\n      \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"const\"), \" thenable \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"=\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"ctor\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n      \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token comment\"\n  }, \"// \\u7EC4\\u4EF6\\u52A0\\u8F7D\\u5B8C\\u6210\\u540E\\u8BBE\\u7F6E\\u5230payload\\u91CC\\uFF0C\\u8BA9\\u5916\\u90E8\\u8BFB\\u53D6\"), \"\\n      thenable\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \".\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"then\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token parameter\"\n  }, \"module\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"=>\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n        \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token comment\"\n  }, \"// ...\"), \"\\n        payload\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \".\"), \"_result \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"=\"), \" module\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \".\"), \"default\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n      \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), \"\\n      \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token comment\"\n  }, \"// \\u629B\\u51FAPromise\\uFF0C\\u88ABSuspense\\u6355\\u83B7\"), \"\\n      \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"throw\"), \" payload\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \".\"), \"_result\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"as\"), \" LazyComponent\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\")))), mdx(\"p\", null, \"\\u603B\\u7ED3\\u4E00\\u4E0B\\uFF0C\", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"\\u5BA2\\u6237\\u7AEF\\u9009\\u62E9\\u6027\\u6C34\\u5408\\u65F6\\uFF0C\\u4EE3\\u7801\\u672A\\u52A0\\u8F7D\\u5B8C\\u6210\\u7684Suspense\\u7684\\u5B50\\u6811\\u4F1A\\u5EF6\\u8FDF\\u6C34\\u5408\\u3002\\u7B49\\u7EC4\\u4EF6\\u4EE3\\u7801\\u52A0\\u8F7D\\u5B8C\\u6210\\u540E\\uFF0C\\u518D\\u53BB\\u91CD\\u542F\\u6E32\\u67D3\\u4EFB\\u52A1\\uFF0C\\u5B8C\\u6210\\u6C34\\u5408\\u3002\")), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"3. \\u7528\\u6237\\u5DF2\\u7ECF\\u5F00\\u59CB\\u4EA4\\u4E92\\uFF0C\\u5BA2\\u6237\\u7AEF\\u6C34\\u5408\\u8FD8\\u6CA1\\u7ED3\\u675F\")), mdx(\"p\", null, \"React18\\u7684\\u5E76\\u53D1\\u6A21\\u5F0F\\uFF0C\\u8BA9\\u6E32\\u67D3\\u4EFB\\u52A1\\u5206\\u5272\\u6210\\u65F6\\u95F4\\u5207\\u7247\\u53BB\\u6267\\u884C\\uFF0C\\u4ECE\\u800C\\u8BA9\\u6D4F\\u89C8\\u5668\\u6709\\u65F6\\u95F4\\u53BB\\u5904\\u7406\\u7528\\u6237\\u4EA4\\u4E92\\u3002\\u90A3\\u4E48\\u5C31\\u6709\\u4E00\\u79CD\\u53EF\\u80FD\\u6027\\u53D1\\u751F\\uFF0C\\u90A3\\u5C31\\u662F\\u670D\\u52A1\\u7AEFhtml\\u5DF2\\u7ECF\\u663E\\u793A\\u51FA\\u6765\\uFF0C\\u4F46\\u662F\\u5BA2\\u6237\\u7AEF\\u8FD8\\u6CA1\\u6709\\u5B8C\\u6210\\u6C34\\u5408\\uFF0C\\u8FD9\\u65F6\\u5019\\u7528\\u6237\\u70B9\\u51FB\\u4E86\\u672A\\u5B8C\\u6210\\u6C34\\u5408\\u7684\\u7EC4\\u4EF6\\u6309\\u94AE\\uFF0C\\u600E\\u4E48\\u529E\\uFF1F\"), mdx(\"p\", null, \"\\u8FD8\\u662F\\u4E4B\\u524D\\u7684\\u4F8B\\u5B50\\uFF0C\", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"SideBar\"), \"\\u548C\", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"Comments\"), \"\\u7EC4\\u4EF6\\u90FD\\u88ABSuspense\\u5305\\u88F9\\uFF0C\\u5047\\u5982\\u5B83\\u4EEC\\u7684\\u4EE3\\u7801\\u90FD\\u5DF2\\u7ECF\\u52A0\\u8F7D\\u5B8C\\u6210\\uFF0C\\u6309\\u7167\\u987A\\u5E8F\\uFF0C\", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"SideBar\"), \"\\u4F1A\\u5148\\u88AB\\u6267\\u884CHydration\\u3002\\u5982\\u56FE\\uFF1A\"), mdx(\"img\", {\n    \"src\": \"assets/react-ssr-demo3.jpg\",\n    \"alt\": null\n  }), mdx(\"p\", null, \"\\u5047\\u5982\\u7528\\u6237\\u70B9\\u51FB\\u4E86\", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"Comments\"), \"\\u7EC4\\u4EF6\\u3002\"), mdx(\"img\", {\n    \"src\": \"assets/react-ssr-demo4.jpg\",\n    \"alt\": null\n  }), mdx(\"p\", null, \"\\u7531\\u4E8E\\u70B9\\u51FB\\u4EA4\\u4E92\\u4F18\\u5148\\u7EA7\\u6700\\u9AD8\\u3002React\\u5C06\\u4EE5\\u540C\\u6B65\\u4F18\\u5148\\u7EA7\\u7ACB\\u523Bhydrate\\u8BE5\", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"Comments\"), \"\\u7EC4\\u4EF6\\u3002\"), mdx(\"img\", {\n    \"src\": \"assets/react-ssr-demo5.jpg\",\n    \"alt\": null\n  }), mdx(\"p\", null, \"\\u7531\\u4E8E\\u662F\\u540C\\u6B65\\u7684\\uFF0C\", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"Comments\"), \"\\u7EC4\\u4EF6hydrate\\u7ED3\\u675F\\u540E\\uFF0C\\u80FD\\u540C\\u6B65\\u6267\\u884C\\u4E8B\\u4EF6\\u5904\\u7406\\u5668\\uFF0C\\u4ECE\\u800C\\u54CD\\u5E94\\u7528\\u6237\\u4EA4\\u4E92\\u3002\"), mdx(\"p\", null, \"\\u7B49\\u5B83\\u4EEC\\u90FD\\u7ED3\\u675F\\u540E\\uFF0C\\u91CD\\u65B0\\u6062\\u590D\", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"SideBar\"), \"\\u7684Hydration\\u3002\"), mdx(\"p\", null, \"\\u539F\\u7406\\u662F\", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"\\u89E6\\u53D1\\u70B9\\u51FB\\u65F6\\uFF0CReact\\u5224\\u65AD\\u5F53\\u524D\\u7EC4\\u4EF6\\u662F\\u5426\\u88ABblock\\uFF0C\\u5982\\u679Cblock\\u4E86\\uFF0C\\u5219\\u53BB\\u540C\\u6B65\\u7684\\u5BF9\\u8BE5fiber\\u6267\\u884CHydration\\uFF08\", mdx(\"a\", {\n    parentName: \"strong\",\n    \"href\": \"https://github.com/facebook/react/blob/d66fa02a303fc53d901bdb0d7bbdaec3e6774b19/packages/react-dom-bindings/src/events/ReactDOMEventListener.js#L194\",\n    \"target\": \"_blank\",\n    \"rel\": \"nofollow noopener noreferrer\"\n  }, \"\\u4EE3\\u7801\\u4F4D\\u7F6E\"), \"\\uFF09\\uFF0C\\u7B49\\u6267\\u884C\\u7ED3\\u675F\\uFF0C\\u518D\\u53BB\\u5B9E\\u9645\\u7684\\u8C03\\u7528event\\u56DE\\u8C03\\u3002\")), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"\\u6C34\\u5408\\u8FC7\\u7A0B\\u662F\\u4ECEHostRoot\\u6839\\u7EC4\\u4EF6\\u3001\\u4EE5\\u53CASuspense\\u7EC4\\u4EF6\\u5F00\\u59CB\\uFF0C\\u5B83\\u7684\\u7C92\\u5EA6\\u4E5F\\u662F\\u628A\\u8FD9\\u4E24\\u7C7B\\u7EC4\\u4EF6\\u4F5C\\u4E3A\\u6574\\u4F53\\u3002\\u5373\\u5982\\u679C\", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"Suspense\"), \"\\u7EC4\\u4EF6\\u4E0B\\u7684\", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"Comments\"), \"\\u7EC4\\u4EF6\\u7684\\u7B2C\\u4E00\\u4E2AComment\\u88AB\\u70B9\\u51FB\\uFF0C\\u90A3\\u4E48\\u8FD9\\u4E2A\", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"Suspense\"), \"\\u6574\\u4F53\\u90FD\\u4F1A\\u540C\\u6B65Hydration\\uFF0C\\u800C\\u4E0D\\u662F\\u53EA\\u6C34\\u5408\\u7B2C\\u4E00\\u4E2AComment\\u3002\")), mdx(\"h3\", null, \"\\u5168\\u6587\\u603B\\u7ED3\"), mdx(\"p\", null, \"\\u672C\\u6587\\u5199\\u7684\\u5F88\\u957F\\uFF0C\\u4ECE\\u8001\\u7684SSR\\u539F\\u7406\\u3001\\u5B9E\\u73B0\\u3001\\u5B58\\u5728\\u7684\\u95EE\\u9898\\uFF0C\\u8BB2\\u5230\\u65B0SSR\\u7279\\u6027\\u7684\\u539F\\u7406\\u3001\\u529F\\u80FD\\u548C\\u89E3\\u51B3\\u7684\\u95EE\\u9898\\u3002\\u8BB2\\u5F97\\u5F88\\u591A\\uFF0C\\u53EF\\u80FD\\u9700\\u8981\\u4E00\\u6BB5\\u65F6\\u95F4\\u624D\\u80FD\\u6D88\\u5316\\u3002\"), mdx(\"p\", null, \"\\u6700\\u540E\\u518D\\u603B\\u7ED3\\u4E00\\u4E0B\\u4E24\\u4E2ASSR\\u4E3B\\u8981\\u7279\\u6027\\uFF1A\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"\\u6D41\\u5F0FHTML\"), \"\\uFF1A\\u8BA9\\u4F60\\u53EF\\u4EE5\\u5C3D\\u65E9\\u7684\\u53D1\\u9001\\u4E00\\u4E9Bhtml\\u5230\\u5BA2\\u6237\\u7AEF\\uFF0C\\u5E76\\u5728\\u5176\\u4ED6\\u8017\\u65F6\\u7684\\u5185\\u5BB9\\u51C6\\u5907ok\\u540E\\uFF0C\\u518D\\u6B21\\u53D1\\u9001\\u5230\\u5BA2\\u6237\\u7AEF\\uFF0C\\u4ECE\\u800C\\u66F4\\u5FEB\\u901F\\u3001\\u5E73\\u6ED1\\u7684\\u663E\\u793A\\u5185\\u5BB9\\u3002\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"\\u9009\\u62E9\\u6027\\u6C34\\u5408\"), \"\\uFF1A\\u8BA9\\u4F60\\u5C3D\\u53EF\\u80FD\\u65E9\\u7684\\u6C34\\u5408\\u5DF2\\u7ECF\\u51C6\\u5907\\u597D\\u7684\\u5185\\u5BB9\\uFF0C\\u4F7F\\u5176\\u53EF\\u4EA4\\u4E92\\u3002\\u5E76\\u5728\\u5176\\u4ED6\\u5185\\u5BB9\\u51C6\\u5907\\u597D\\u540E\\u7ACB\\u5373\\u6C34\\u5408\\u3002\\u5E76\\u4E14\\u652F\\u6301\\u4F18\\u5148\\u6C34\\u5408\\u6B63\\u5728\\u4EA4\\u4E92\\u7684\\u90E8\\u5206\\u3002\"))), mdx(\"p\", null, \"\\u518D\\u56DE\\u987E\\u4E00\\u4E0BReact\\u8001SSR\\u89E3\\u51B3\\u4E0D\\u4E86\\u7684\\u4E09\\u4E2A\\u95EE\\u9898\\uFF0C\\u5728\\u65B0SSR\\u7279\\u6027\\u4E0B\\uFF0C\\u662F\\u5982\\u4F55\\u88AB\\u89E3\\u51B3\\u7684\\uFF1A\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"\\u5FC5\\u987B\\u83B7\\u53D6\\u6240\\u6709\\u6570\\u636E\\uFF0C\\u624D\\u80FD\\u663E\\u793A\\u5185\\u5BB9\")), mdx(\"p\", {\n    parentName: \"li\"\n  }, \"  \\u6D41\\u5F0FHTML\\u7684\\u51FA\\u73B0\\uFF0C\\u8BA9\\u6211\\u4EEC\\u4E0D\\u518D\\u9700\\u8981\\u7B49\\u5F85\\u6240\\u6709\\u6570\\u636E\\u83B7\\u53D6\\u3002\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"\\u5FC5\\u987B\\u52A0\\u8F7D\\u6240\\u6709js\\uFF0C\\u624D\\u80FD\\u5F00\\u59CB\\u6C34\\u5408\")), mdx(\"p\", {\n    parentName: \"li\"\n  }, \"  \\u6C34\\u5408\\u4E0D\\u518D\\u9700\\u8981\\u6240\\u6709js\\u52A0\\u8F7D\\u5B8C\\u6210\\uFF0C\\u6240\\u4EE5\\u6211\\u4EEC\\u53EF\\u4EE5\\u4F7F\\u7528\\u4EE3\\u7801\\u5206\\u5305\\uFF0C\\u8BA9\\u8F83\\u5927\\u7684js\\u5757\\u4ECE\\u521D\\u59CB\\u7684bundle\\u5206\\u79BB\\u51FA\\u53BB\\uFF0C\\u4ECE\\u800C\\u8BA9\\u6C34\\u5408\\u66F4\\u5FEB\\u5F00\\u59CB\\u3002\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"\\u5FC5\\u987B\\u5B8C\\u6210\\u6574\\u4E2A\\u6C34\\u5408\\u8FC7\\u7A0B\\uFF0C\\u9875\\u9762\\u624D\\u80FD\\u4EA4\\u4E92\")), mdx(\"p\", {\n    parentName: \"li\"\n  }, \"  \\u6C34\\u5408\\u4E0D\\u518D\\u662F\\u6574\\u4F53\\u8FDB\\u884C\\uFF0C\\u800C\\u662F\\u53EF\\u4EE5\\u90E8\\u5206\\u5B8C\\u6210\\u3002\\u6C34\\u5408\\u5B8C\\u6210\\u7684\\u90E8\\u5206\\u53EF\\u4EE5\\u4EA4\\u4E92\\u3002\\u672A\\u5B8C\\u6210\\u7684\\u90E8\\u5206\\uFF0C\\u5982\\u679C\\u7528\\u6237\\u4E0E\\u5176\\u4EA4\\u4E92\\uFF0CReact\\u4F1A\\u4EE5\\u6700\\u9AD8\\u4F18\\u5148\\u7EA7\\uFF0C\\u7ACB\\u523B\\u8BA9\\u5176\\u5B8C\\u6210\\u6C34\\u5408\\uFF0C\\u5E76\\u7ACB\\u523B\\u54CD\\u5E94\\u4EA4\\u4E92\\u3002\\u6240\\u4EE5\\u7528\\u6237\\u611F\\u89C9\\u5B83\\u5C31\\u662F\\u77AC\\u95F4\\u5B8C\\u6210\\u7684\\u3002\"))), mdx(\"p\", null, \"\\u53EF\\u4EE5\\u8BD5\\u60F3\\u4E0B\\uFF0C\\u8001SSR\\u7684\\u987A\\u5E8F\\u4E32\\u884C\\uFF0C\\u4E14\\u76F8\\u4E92\\u4F9D\\u8D56\\u7684\", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"fetch data => SSR => load js => Hydration\"), \"\\u4F4E\\u6548\\u8FD0\\u884C\\u6A21\\u5F0F\\uFF0C\\u5728\\u65B0SSR\\u7279\\u6027\\u4E0B\\uFF0C\\u8F6C\\u53D8\\u4E3A\", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"\\u5E76\\u884C\\u3001\\u5F02\\u6B65\\u3001\\u6D41\\u5F0F\\u6E32\\u67D3\"), \"\\u7684\\u9AD8\\u6548\\u8FD0\\u884C\\u6A21\\u5F0F\\u4E0B\\uFF0C\\u6027\\u80FD\\u4F1A\\u6709\\u591A\\u5927\\u7684\\u63D0\\u5347\\u3002\\u8BA9\\u6211\\u4EEC\\u62ED\\u76EE\\u4EE5\\u5F85\\u5427\\uFF01\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"\\u672C\\u6587\\u672A\\u4ECB\\u7ECD\\u5230\\u7684\\u76F8\\u5173\\u5185\\u5BB9\\u5305\\u62EC\\u4EE5\\u4E0B\\u51E0\\u90E8\\u5206\\uFF0C\\u540E\\u7EED\\u53EF\\u80FD\\u8003\\u8651\\u5355\\u72EC\\u51FA\\u4E00\\u4E9B\\u6587\\u7AE0\\u6765\\u4ECB\\u7ECD\\u3002\", mdx(\"br\", null)), mdx(\"ul\", {\n    parentName: \"blockquote\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"renderToPipeableStream\\u7684\\u5B9E\\u73B0\\u539F\\u7406\", mdx(\"br\", null)), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Suspense\\u7684\\u539F\\u7406\\u53CA\\u5176\\u5B83\\u7279\\u6027\", mdx(\"br\", null)), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"\\u5BA2\\u6237\\u7AEFHydration\\u7684\\u539F\\u7406\", mdx(\"br\", null)))));\n}\n;\nMDXContent.isMDXComponent = true;","timeToRead":3,"excerpt":"最近笔者腾出了大把的时间，学习了一下React18。 导航 什么是SSR React18之前的旧SSR 手动实现旧SSR 为什么用Next.js React18的新SSR Suspense组件 流式传输Html 流式HTML + Suspense 选择性水合 + Suspense…","frontmatter":{"title":"谈一谈React18的SSR","description":"介绍React18的SSR相关知识","cover":{"publicURL":"/leon-blog/static/4e049eb08e0645207ac2ff6babe990e0/react-ssr-cover.jpg","childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAMABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAQBAwX/xAAVAQEBAAAAAAAAAAAAAAAAAAADBP/aAAwDAQACEAMQAAABboazHjQIBr//xAAbEAACAQUAAAAAAAAAAAAAAAAAAQIDBBAjMf/aAAgBAQABBQJsrS14u+n/xAAXEQADAQAAAAAAAAAAAAAAAAABAhAh/9oACAEDAQE/AU0z/8QAFhEAAwAAAAAAAAAAAAAAAAAAAhAx/9oACAECAQE/ASi//8QAGhAAAQUBAAAAAAAAAAAAAAAAEAABAhEhUf/aAAgBAQAGPwJV3DFh/8QAGhABAAIDAQAAAAAAAAAAAAAAAQARECFRkf/aAAgBAQABPyFB0nkouaXDpcN5KXH/2gAMAwEAAgADAAAAELQP/8QAFhEBAQEAAAAAAAAAAAAAAAAAARAR/9oACAEDAQE/EDiT/8QAFhEAAwAAAAAAAAAAAAAAAAAAARAR/9oACAECAQE/ECif/8QAHhABAQABAwUAAAAAAAAAAAAAAREhABAxQWFxgcH/2gAIAQEAAT8QlQHdP3VmI6Dpy48GiCGgwdsrYexZt//Z"},"backgroundColor":"transparent","images":{"fallback":{"src":"/leon-blog/static/4e049eb08e0645207ac2ff6babe990e0/1bef4/react-ssr-cover.jpg","srcSet":"/leon-blog/static/4e049eb08e0645207ac2ff6babe990e0/d2eb3/react-ssr-cover.jpg 330w,\n/leon-blog/static/4e049eb08e0645207ac2ff6babe990e0/be87d/react-ssr-cover.jpg 661w,\n/leon-blog/static/4e049eb08e0645207ac2ff6babe990e0/1bef4/react-ssr-cover.jpg 1321w","sizes":"(min-width: 1321px) 1321px, 100vw"},"sources":[{"srcSet":"/leon-blog/static/4e049eb08e0645207ac2ff6babe990e0/6ac59/react-ssr-cover.avif 330w,\n/leon-blog/static/4e049eb08e0645207ac2ff6babe990e0/f8be5/react-ssr-cover.avif 661w,\n/leon-blog/static/4e049eb08e0645207ac2ff6babe990e0/85ce6/react-ssr-cover.avif 1321w","type":"image/avif","sizes":"(min-width: 1321px) 1321px, 100vw"},{"srcSet":"/leon-blog/static/4e049eb08e0645207ac2ff6babe990e0/c9f9e/react-ssr-cover.webp 330w,\n/leon-blog/static/4e049eb08e0645207ac2ff6babe990e0/af826/react-ssr-cover.webp 661w,\n/leon-blog/static/4e049eb08e0645207ac2ff6babe990e0/c1a8f/react-ssr-cover.webp 1321w","type":"image/webp","sizes":"(min-width: 1321px) 1321px, 100vw"}]},"width":1321,"height":825}}},"coverAlt":"封面","datePublished":"2024-07-20 12:04:20","dateModified":"2024-07-20 12:04:20","category":"经验总结","tags":["前端","React","架构","造轮子","Next"]},"fields":{"slug":"/react-ssr","route":"/react-ssr","pathName":"/leon-blog/react-ssr","url":"https://missmess.github.io/leon-blog/react-ssr"},"internal":{"content":"---\ntitle: \"谈一谈React18的SSR\"\ncover: ../static/assets/react-ssr-cover.jpg\ncoverAlt: \"封面\"\ndescription: \"介绍React18的SSR相关知识\"\ndatePublished: \"2024-07-20 12:04:20\"\ndateModified: \"2024-07-20 12:04:20\"\nslug: \"react-ssr\"\ncategory: \"经验总结\"\ntags:\n  - 前端\n  - React\n  - 架构\n  - 造轮子\n  - Next\n---\n\n最近笔者腾出了大把的时间，学习了一下React18。\n\n### 导航\n\n- [什么是SSR](#什么是ssr)\n- [React18之前的旧SSR](#react-18-之前的旧ssr)\n- [手动实现旧SSR](#手动实现旧ssr)\n- [为什么用Next.js](#为什么用-next-js)\n- [React18的新SSR](#react-18-的新ssr)\n- [Suspense组件](#suspense组件)\n- [流式传输Html](#流式传输-html)\n- [流式HTML + Suspense](#流式html-suspense)\n- [选择性水合 + Suspense](#选择性水合-suspense)\n- [全文总结](#全文总结)\n\nReact18带来了许多新特性，其中包括`SSR`的增强和`Suspense`的增强。本文就来具体剖析一下这两部分的变化。\n\n> [官方React18 SSR Discussion](https://github.com/reactwg/react-18/discussions/37)\n\n那么，首先来详细讲一下SSR。\n\n### 什么是SSR\n\nSSR并不是最近才发明的，早在互联网初期，我们看到的web页面几乎都是服务端渲染的，诸如Jsp、ASP、Java等。当时前后端开发是一体的，UI通过模版来表现，并在服务端处理成html发送到浏览器。如今我们所说的SSR往往指的是在使用前端组件化的框架如React、Vue时，服务端渲染组件并最终生成html发送到客户端。\n\n对比客户端渲染（CSR）主要优势就是：\n\n1. **SEO友好**：html在服务端渲染，搜索引擎能抓取页面内容，SEO效果好。而CSR页面往往html是空的。\n2. **首屏加载速度快**：用户请求页面后直接返回完整的HTML并展示。不需要等待客户端下载完整js并执行，减少白屏时间。\n\n缺点就是，需要node服务器，不能像CSR应用那样可以直接放到CDN上。\n\nReact技术栈的同学在想到SSR时，往往第一反应就是[Next.js](https://nextjs.org/docs/pages/building-your-application/rendering)。Next.js是一套完整的SSR应用开发框架，包含路由系统、数据获取、SSR、SSG、图片脚本优化等。它底层是基于React，其中SSR的实现也是React本身提供的能力。\n\n这是因为，React具有同构特性，它允许相同的代码在服务器和客户端上运行。\n\n### React18之前的旧SSR\n\nReact提供了一些[Server Api](https://react.dev/reference/react-dom/server)帮助在服务端渲染html，并在客户端[水合](https://react.dev/reference/react-dom/client/hydrateRoot)（Hydration）。\n\n简述下这个过程：\n\n1. 接收到一个请求后，React在server端执行**Server Api**，将React组件（比如`<App />`）渲染成string或者stream形式的html。这个过程是服务端的React执行的。此时，html中只包含静态的内容，不包含事件监听器等，页面无法交互。\n\n2. 当这个html渲染到web端时，浏览器去执行js脚本，此时开始由客户端的React接管了。执行`hydrateRoot`方法，会将该html和React组件树（比如上一步的`<App />`）进行**Hydration**处理。\n\n3. **Hydration**流程，和我们熟悉的`createRoot`触发的首次渲染流程一样。会执行到`render阶段`，只不过**Hydration**会复用dom，将创建的fiber与dom关联，并且在`completeWork`时不创建dom。执行到`commit阶段`时，会绑定上事件监听器。这样流程结束后，页面就有了交互性。\n\n**一句话概述就是：server端React渲染出首屏页面，浏览器可以直接展示，但是交互不了。Hydration就是web端React接管页面的过程，并让页面变得可交互**。\n\n> 其中服务端渲染部分`renderToString`原理：就是递归遍历组件树，拼接成html字符串。<br />\n客户端水合`hydrateRoot`原理如上。代码不赘述。<br />\n参考文章：[React SSR流程分析](https://zhuanlan.zhihu.com/p/622415299)。\n\n### 手动实现旧SSR\n\n下面写一个简单的demo，来实现SSR。\n\n为了方便实现同一套组件，既在服务端渲染，又在客户端hydrate。所以我将服务端代码和客户端代码放在同一个项目里，创建了两个webpack配置文件。这样它们都方便导入`App.jsx`。\n\n![项目文件结构](assets/react-ssr-file-struct.jpg)\n\n参考[官方文档](https://react.dev/reference/react-dom/server/renderToPipeableStream#rendering-a-react-tree-as-html-to-a-nodejs-stream)，首先先实现`App.jsx`：\n\n```jsx\nimport React, { useState } from \"react\";\n\nexport default function App() {\n  return <Count />;\n}\n\nfunction Count() {\n  const [count, setCount] = useState(0);\n  return (\n    <div>\n      <h1>测试SSR</h1>\n      <div>计数器：{count}</div>\n      <button onClick={() => setCount(count + 1)}>+1</button>\n    </div>\n  );\n}\n```\n\nApp组件嵌套了一个简单的计数器组件。\n\n我们打算在server上通过`renderToString`方法直接渲染出一个包含客户端执行脚本的html。这样的话浏览器渲染后可以直接执行。\n\n所以我们要实现一下客户端待执行的脚本`index.js`：\n\n```javascript\nimport React from \"react\";\nimport { hydrateRoot } from \"react-dom/client\";\nimport App from \"./App.jsx\";\n\n// ...\n// 开始hydrate\nfunction hydrate() {\n  hydrateRoot(document.getElementById(\"app\"), <App />);\n}\n// ...\n```\n\n客户端脚本写完了，使用webpack打包客户端代码，生成`output/bundle.js`。\n\n然后在服务端`server.js`里，设置请求路由，并通过`renderToString`方法返回html。html中包含脚本`bundle.js`：\n\n```javascript\nconst React = require(\"react\");\nconst Koa = require(\"koa\");\n\n// ...\napp.use(serve(\"./output\"));\n\nrouter.get(\"/\", async (ctx, next) => {\n  ctx.set(\"content-type\", \"text/html\");\n  ctx.status = 200;\n\n  const appString = renderToString(<App />);\n  ctx.body = `<html>\n      <head>\n        <meta charSet=\"utf-8\" />\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n        <link rel=\"stylesheet\" href=\"/styles.css\"></link>\n        <title>My App</title>\n      </head>\n      <body>\n        <div id=\"app\">\n          ${appString}\n        </div>\n      </body>\n      <script src=\"/bundle.js\" async></script>\n    </html>`;\n});\n// ...\n\napp.listen(888);\n```\n\n开发完了，测试下。\n\n![输出](assets/react-ssr-test.jpg)\n\n可以正常展示计数和点击+1。如果我们把`index.js`里面的`hydrateRoot`方法注释掉，即不水合，会发现，上面的按钮点击已经没有反应了。\n\n> 该测试项目的代码在[这里](https://github.com/missmess/leon-build-wheel/tree/main/packages/demo-ssr-react)\n\n> 思考：React的SSR和传统后端语言的SSR的区别是什么呢？<br />\n最明显的区别就是传统SSR是多页应用，页面通过刷新跳转。请求一个地址返回一个html页面。体验较差。<br />\n而React的SSR是同构应用，即请求地址的首屏由服务端渲染，此后客户端React接管，形成单页应用。体验很优秀。\n\n### 为什么用Next.js\n\n既然React已经支持了SSR，那为什么还需要Next.js这样的技术呢？*（这里主要说的是Next.js的Pages Router）。*\n\n**开发体验**\n\n从上面的例子可以看出来，手动通过React实现SSR，在一个项目里面，要自己控制好前后端代码的边界。哪些是前端的代码，哪些是后端的代码；要自己考虑怎么实现前端和后端都可以运行的代码；并且还需要分开编译，整体开发体验很差。而使用`Next.js`就不需要考虑这些，Next.js已经帮我们处理好了。\n\n**路由**\n\n也是上面的例子，我们仅仅实现了一个基础的ssr应用，没有包含多页面路由，而路由是最重要的功能之一。那ssr如果要支持多页面怎么做？\n\n好在`react-router`支持[ssr](https://reactrouter.com/en/main/guides/ssr)。在服务端使用`StaticRouter`，在客户端使用`BrowserRouter`。但是路由功能很多呀，两边适配起来也不容易。而`Next.js`则通过基于文件的路由系统将这一系列复杂工作全都处理完了，我们开箱即用即可。\n\n**异步数据获取**\n\n上面的例子也没有展现如何在ssr时获取异步数据，并依据数据渲染页面。这里要考虑的，一是数据要在服务端获取，二是数据也要注入到客户端，否则水合会出问题*（比如ssr获取数据为100个元素的list，并渲染出100个div。客户端如果未获取这个props数据，那客户端会渲染空列表）*。\n\n为了实现两端异步数据获取的同构，我们需要借助于`react-router`的loader功能。在服务端，在loader中调用组件暴露的静态方法来获取异步数据，并作为props传递到组件。\n\n```javascript\n// router\n[\n  // ...\n  { \n    path: \"/posts\",\n    component: Posts,\n    loader: isServer ? Posts.getServerData : Posts.getClientData,\n  }\n  // ...\n]\n\n// Posts组件\nfunction Posts({ posts }) {\n  return <div>{posts.map((p) => {/* */})}</div>\n}\n\nPosts.getServerData = async () => {\n  const posts = await getPosts()\n  return { posts };\n}\n```\n\n生成ssr的html时，暴露数据到&lt;script&gt;标签下。\n\n```javascript\nctx.body = `<html>\n  // ...\n  <script id=\"_POST_DATA_\" type=\"application/json\">\n    [{ id: 1, title: \"Sumish\" }, ...]\n  </script>\n  // ...\n</html>`;\n```\n\n客户端，需要从html内&lt;script&gt;标签下获取数据并注入。\n\n```javascript\nPosts.getClientData = () => {\n  const posts = JSON.parse(document.getElementById(\"__NEXT_DATA__\").textContent);\n  return { posts };\n}\n```\n\n`Next.js`的方案可能与上面类似，它已经完全封装好该功能，只需要提供一个`getServerSideProps`函数并实现即可。\n\n**CSS处理**\n\n上面的例子中，我们将css放在了html上。这样是可行的。但是如果我们想要使用less这样的css预处理器，甚至是emotion这样的`css-in-js`技术，ssr就不好处理了。因为node上无法执行dom操作。ssr处理css，必须要将css内容生成到html字符串中。好在`Next.js`也为我们封装好了。\n\n**单页体验**\n\n上面的例子中，我们在水合后交由客户端React处理后续操作，就为了实现SPA的良好体验。但实现上还存在问题。比如异步数据获取：SSR时，异步数据是在服务端获取并在客户端注入。但SPA情况下，数据则必须在客户端获取。要应对这种情况，代码还需要去fix。而Next.js默认已经处理好SSR场景和SPA场景下的异步数据获取逻辑。其它功能也一样处理完善。\n\n**其他优化**\n\n除此之外，Next.js还提供了很多优化和便利。包括SEO处理、SSG静态生成、TypeScript支持、打包优化等等。并且Next.js始终跟进最新的React能力，从而提供性能更好的应用。\n\n> 参考文章：[React ssr原理](https://blog.csdn.net/frontend_frank/article/details/136470574)\n\n### React18的新SSR\n\nReact18下，SSR得到了很多增强特性。在此之前的React版本中，正如我们上面手动实现的例子，实现SSR需要：\n\n1. 在服务端，整个应用从数据源fetch数据；整个应用渲染成字符串；返回html的response。\n\n2. 在客户端，加载javascript；执行javascript进行Hydration。\n\n这两步骤缺一不可，按顺序执行，并且内部也是同步执行的。比如服务端必须获取完数据，并完整渲染、客户端接收到完整html再整个执行Hydration。可想而知，这个过程并不高效：\n\n- **必须获取所有数据，才能显示内容**\n\n    比如某一个组件获取数据比较耗时，那它就会阻塞后续所有步骤，导致页面白屏时间很长。除非说把这个数据获取从SSR中排除，丢给CSR去处理。（CSR大家都懂，必须等待js执行完才开始获取数据）。\n\n- **必须加载所有js，才能开始水合**\n\n    比如某个组件交互逻辑比较复杂，js代码比较多。由于React只能一次性完成Hydration，那么你必须等待所有组件js都加载完成，才能开始Hydration。你可能会选择代码拆分，但React没法做到Hydration过程中按需加载组件代码。为了妥协，你只能把这个组件从SSR中移除，并使用代码拆分。\n\n- **必须完成整个水合过程，页面才能交互**\n\n    比如某个组件渲染逻辑很复杂，hydration可能耗时比较久。那么你必须等到所有组件hydration结束，才能与其中一个组件有交互。\n\n那新的SSR架构怎么解决这些问题呢？React18带来了流式Html和选择性水合：\n\n- **Streaming Html**：在服务端，使用`renderToPipeableStream`代替`renderToString`渲染，可以让html分段传输到浏览器，让浏览器可以更快速、平滑的显示内容。\n\n- **Selective Hydration**：在客户端，可以针对已经完成渲染的区域进行水合，而不需要和原来一样等待整个页面加载完成以及所有js加载完成，才能开始水合。\n\n在讲这两个特性之前，先了解一下新的`Suspense`组件。因为它们的实现离不开`Suspense`。\n\n### Suspense组件\n\n在React18之前，`Suspense`组件的功能很单一，我们使用它的场景就是和`React.lazy`组合，来实现**代码拆分**和**组件懒加载**。\n\n```javascript\nimport React, { Suspense, lazy } from 'react';\n\nconst LazyComponent = lazy(() => import('./LazyComponent'));\n\nfunction App() {\n  return (\n    <Suspense fallback={<div>Loading...</div>}>\n      <LazyComponent />\n    </Suspense>\n  );\n}\n```\n\n例子中，`React.lazy` + 动态导入语法（`() => import(/*...*/)`）让`LazyComponent`组件的代码在打包时被单独拎出去。并在需要到该组件时，才去加载对应的组件代码。`Suspense`组件会在该组件代码没有被加载完成前，展示fallback中的备用组件。\n\n在React18的并发特性下，[Suspense组件](https://react.dev/reference/react/Suspense)得到了诸多[增强特性](https://react.dev/blog/2022/03/29/react-v18#new-suspense-features)。它的定义改为：**在组件树中，如果某一部分还没准备好被显示出来，`Suspense`可以让你指定它的loading状态。**可以看出来，它包含了之前的能力，但是明显范围更大（没加载完成=>没准备好显示）。\n\nSuspense的全部新特性，以及原理、升级原因，详细可以看一下[Suspense功能的RFC](https://github.com/reactjs/rfcs/blob/main/text/0213-suspense-in-react-18.md)。这里就不再赘述。\n\n这里重点关注一下与SSR有关的新特性，之前`Suspense`无法应用于SSR。而在React18使用`renderToPipeableStream`这个新的SSR渲染器的话，它可以与Suspense集成：**新渲染器创建一个stream来发送html到客户端，SSR过程中，当使用`Suspense`包裹的这部分组件树还没准备好渲染时，可以先发送fallback的内容。当这部分组件准备好后，React会在当前流中，发送html和内联script脚本到客户端，来将客户端的dom修正。**这一部分都是SSR实现的，即使客户端js完全没有执行，也不影响。\n\n### 流式传输Html\n\n上面提到`renderToPipeableStream`创建一个stream来发送html到客户端。这个是怎么实现的呢？\n\n扩展一下，服务端发送流式数据到客户端有三种方式：\n\n1. **Server-Send Events**：SSE是一种服务器推送技术，允许服务器向客户端发送事件。通过设置请求头`Content-Type: text/event-stream`，请求体发送二进制流实现。\n\n2. **分块传输（Chunked Transfer Encoding）**：可以将不确定内容长度的数据块，分多次的传输给客户端，通过设置`Transfer-Encoding: chunked`，请求体发送二进制流实现。与SSE的区别是SSE主要用于发送事件。\n\n3. **WebSocket**：一种服务器和客户端的双向通信协议。用来实现实时通信。与SSE的区别是SSE不支持客户端发送事件到服务端。\n\n新渲染器看起来很适合使用分块传输的方式发送html，因为html内容是不确定的，随着渲染过程的进行才慢慢确定。实际上React也是使用的分块传输技术。很简单，写个接口测试一下：\n\n```javascript\nrouter.get(\"/streaming\", async (ctx) => {\n  ctx.set(\"content-type\", \"text/html\");\n  ctx.set(\"transfer-encoding\", \"chunked\");\n  ctx.status = 200;\n  // 发送第一段html\n  ctx.res.write(\"<!DOCTYPE html><html><head><title>Streaming</title></head><body><div id='app'><p>First Segment</p>\");\n  // 延迟3秒方便看效果\n  await new Promise((resolve) => setTimeout(resolve, 3000));\n  // 发送第二段html\n  ctx.res.write(\"<p>Second Segment</p></div></body></html>\");\n  ctx.res.end();\n});\n```\n\n浏览器上直接调用该接口，查看渲染出来的页面如下：\n\n<video src=\"../static/assets/react-ssr-streaming.mov\" width=\"100%\" autoplay muted loop />\n\n可以看到，现代浏览器对分块传输的html支持还是很好的，即使html内容不全，也自动补全了。并在后一段发送过来时追加上去。整个过程页面显示很平滑。\n\n### 流式HTML + Suspense\n\n基于此，React中在服务器端又是怎么区分哪些需要分块去传输呢？答案是`Suspense`。\n\n**数据获取导致的Suspense**\n\n直接拿[官方demo](https://codesandbox.io/p/sandbox/kind-sammet-j56ro)来说（可以自己fork后运行，如果不行就下载到本地）。主要的组件结构如下：\n\n```jsx\n<Layout>\n  <NavBar />\n  <Sidebar />\n  <RightPane>\n    <Post />\n    <Suspense fallback={<Spinner />}>\n      <Comments />\n    </Suspense>\n  </RightPane>\n</Layout>\n```\n页面包含顶部导航、左侧侧边栏、右侧内容区，右侧内容区包含上面的Post内容，和用Suspense包裹的Comments评论列表。如图：\n\n![](assets/react-ssr-demo1.jpg)\n\nComments需要一个耗时的获取数据的操作，所以使用Suspense包裹。并且在SSR首次工作到这里时，由于Comments没有获取完成数据，所以它没有准备OK。Suspense将fallback的组件提交出去。最终SSR首次提交到客户端的stream Html如下：\n\n```html\n<main>\n  <nav>\n    <!--NavBar -->\n    <a href=\"/\">Home</a>\n   </nav>\n  <aside>\n    <!-- Sidebar -->\n    <a href=\"/profile\">Profile</a>\n  </aside>\n  <article>\n    <!-- Post -->\n    <p>Hello world</p>\n  </article>\n  <section id=\"comments-spinner\">\n    <!-- Spinner -->\n    <img width=400 src=\"spinner.gif\" alt=\"Loading...\" />\n  </section>\n</main>\n```\n\n![](assets/react-ssr-demo2.jpg)\n\n接着，当Comments终于完成了自己的渲染。**React将发送另一段html并包含一段内联js脚本，来将新的内容替换到Spinner的位置。**\n\n```html\n<!-- 实际的Comment组件内容 -->\n<div hidden id=\"comments\">\n  <p>First comment</p>\n  <p>Second comment</p>\n</div>\n\n<script>\n  // 非常简化的实现\n  const commentsDiv = document.getElementById('comments');\n  document.getElementById('sections-spinner').replaceChildren(commentsDiv);\n\n  commentsDiv._reactRetry();\n</script>\n```\n\n同时注意到最后一句`commentsDiv._reactRetry()`，是为了重启Comment组件所属的`Suspense`边界的渲染任务。后面讲到**选择性水合**时会讲解。\n\n由此可见，我们在组件树中也可以插入任意多个Suspense的组件，这些组件会在自己内容准备OK的时候，独立的发送一段html及js到客户端以完成“修正”。它们不是自上而下的，下面的无需等待上面的组件渲染完成。\n\n> 由于Suspense必须要知道组件数据准备OK的时机，所以数据获取逻辑必须要与Suspense打通。但是到目前为止，React还没有提供更合适的方式来打通它们。官方推荐使用Server Components（目前仍是实验性的）或者是三方的框架如**Next.js**、**Relay**等，它们可能会提供对应的封装。<br />\n查看[官方的示例](https://codesandbox.io/p/devbox/kind-sammet-j56ro?file=%2Fserver%2Frender.js%3A66%2C15)，它能实现上述效果，原理是组件在请求数据时抛出一个`Promise`，这个抛出的`Promise`会被上方的`Suspense`组件捕获，此时Suspense组件就会认为子树还未准备好显示，就会输出`fallback`的内容，从而让SSR继续。当这个`Promise`被解决（resolve）时，`Suspense`会重新渲染子树。<span style=\"color: #ff8900;\">注意：这个方法只是为了演示使用，不能用于生产防止意外情况！</span>\n\n**代码分包导致的Suspense**\n\nReact18之前，`React.lazy`无法应用于SSR实现代码分包，如果之前希望SSR的同时，客户端还能代码分包。那就只能将需要代码分包的组件从SSR移除，并且在客户端Hydration之前加载这些js。那代码分包的意义何在呢？\n\n但现在不存在这个问题了。用法是一样的，比如我们将`SideBar`组件懒加载：\n\n```jsx\nimport { lazy } from 'react';\n\nconst Sidebar = lazy(() => import('./Sidebar'));\n\n// ...\n<Suspense fallback={<Spinner />}>\n  <Sidebar />\n</Suspense>\n// ...\n```\n\n此时，由于`SideBar`组件懒加载。首次SSR渲染时，如果组件未准备OK，`Suspense`会输出fallback内容，直到`SideBar`组件加载完成再发送新的内容。\n\n> 流式SSR存在降级逻辑，假如Suspense边界内的组件SSR抛出异常，SSR失败。那么客户端会接管这部分组件渲染逻辑。\n\n### 选择性水合 + Suspense\n\nReact18之后，客户端支持了选择性水合，不再需要等待html及所有组件加载完成后一次性的执行Hydration过程。\n\n原理是：客户端在执行Hydration阶段时，会将那些已经完成渲染的组件hydate，使之可以交互。遇到`Suspense`组件时，判断它的子树是否已经完成了渲染，如果未完成则跳过hydrate。等待组件渲染完成后，再恢复这部分子树的hydrate。\n\n分三种情况去讨论：\n\n**1. 客户端加载完成，客户端水合时，发现服务端还在分段传输**\n\n常见的情况就是服务端组件还在获取数据等待渲染，而客户端js都已经开始执行了。此时选择性水合与流式HTML协作，不管是由于**数据获取**还是**代码分包**导致html需要分段传输，都没有关系。水合时会跳过这些还没有html的组件。\n\n前面的例子我们提到，Comment组件在获取到数据，延迟的渲染完成后重新发送了一段html和内联脚本，内联脚本最后一句就是调用dom元素上的`_reactRetry()`。这个方法就是重启`Suspense`边界的渲染任务的，因为这个边界内的子树有可能全部渲染完成了。我们搜索下[源码](https://github.com/facebook/react/blob/main/packages/react-reconciler/src/ReactFiberBeginWork.js#L2869)，发现它是在beginWork阶段绑定到Suspense的dom元素上的。\n\n```javascript\n// ReactFiberBeginWork.js\nfunction beginWork(current, workInProgress) {\n  // ...\n  switch (workInProgress.tag) {\n    // ...\n    case SuspenseComponent:\n      // ...\n      updateSuspenseComponent();\n    // ...\n  }\n  // ...\n}\n\nfunction updateSuspenseComponent() {\n  // ...\n  if (/* ... */) {\n    updateDehydratedSuspenseComponent();\n  }\n  // ...\n}\n\nfunction updateDehydratedSuspenseComponent(suspenseInstance) {\n  // ...\n  if (isSuspenseInstancePending(suspenseInstance)) {\n    const retry = retryDehydratedSuspenseBoundary.bind(null, current);\n    registerSuspenseInstanceRetry(suspenseInstance, retry);\n    return null;\n  }\n  // ...\n}\n\n// ReactFiberConfigDOM.js\nexport function registerSuspenseInstanceRetry(\n  instance: SuspenseInstance,\n  callback: () => void,\n) {\n  instance._reactRetry = callback;\n}\n```\n\n总结一下，**客户端选择性水合时，未加载html的Suspense的子树会延迟水合。等服务端流发送这段html后，再去重启渲染任务，完成水合。**\n\n**2. 服务端渲染完成，客户端水合时，发现组件代码还缺失**\n\n常见的情况就是我们为了不让一次性加载的js过于庞大，会选择将部分组件进行**代码分包**。当服务端渲染已经完成时，客户端开始执行水合，发现部分组件代码还没加载。\n\n这就是`选择性水合`的另一个使用场景。上节中代码分包的例子中，`SideBar`组件代码分包。当水合时，虽然它的ssr的html已经存在，但由于代码还没加载完成，仍然标记为未完成渲染。它外部的`Suspense`会跳过它。从而让其他部分先参与水合。\n\n当`SideBar`的组件代码终于完成了加载，React会重新渲染并完成该部分的Hydration。\n\n它的原理和前面《**数据获取导致的Suspense**》中，实现数据获取和重启渲染原理比较像。**`React.lazy`方法会生成一个`LazyComponent`，在`beginWork阶段`会挂载`LazyComponent`，调用其`_init`（[代码位置](https://github.com/facebook/react/blob/main/packages/react/src/ReactLazy.js#L53)）方法，从而开始加载组件，并抛出Promise。抛出的Promise会被`Suspense`捕获，并在Promise被解决时，重新渲染**。\n\n```javascript\n// ReactFiberBeginWork.js\nfunction beginWork(current, workInProgress) {\n  // ...\n  switch (workInProgress.tag) {\n    // ...\n    case LazyComponent:\n      // ...\n      mountLazyComponent();\n    // ...\n  }\n  // ...\n}\n\nfunction mountLazyComponent(current, workInProgress, elementType) {\n  // ...\n  const lazyComponent = elementType;\n  const payload = lazyComponent._payload;\n  const init = lazyComponent._init;\n  // Lazy组件挂载时开始加载真实组件\n  let Component = init(payload);\n  // ...\n}\n\n// ReactLazy.js\nfunction lazy(ctor: () => Promise<{ default: T }>) {\n  return {\n    _payload: {\n      _status: -1,\n      _result: ctor\n    },\n    _init: function lazyInitializer(payload) {\n      const ctor = payload._result;\n      // 开始加载组件\n      const thenable = ctor();\n      // 组件加载完成后设置到payload里，让外部读取\n      thenable.then((module) => {\n        // ...\n        payload._result = module.default;\n      })\n      // 抛出Promise，被Suspense捕获\n      throw payload._result;\n    },\n  } as LazyComponent\n}\n```\n\n总结一下，**客户端选择性水合时，代码未加载完成的Suspense的子树会延迟水合。等组件代码加载完成后，再去重启渲染任务，完成水合。**\n\n**3. 用户已经开始交互，客户端水合还没结束**\n\nReact18的并发模式，让渲染任务分割成时间切片去执行，从而让浏览器有时间去处理用户交互。那么就有一种可能性发生，那就是服务端html已经显示出来，但是客户端还没有完成水合，这时候用户点击了未完成水合的组件按钮，怎么办？\n\n还是之前的例子，`SideBar`和`Comments`组件都被Suspense包裹，假如它们的代码都已经加载完成，按照顺序，`SideBar`会先被执行Hydration。如图：\n\n![](assets/react-ssr-demo3.jpg)\n\n假如用户点击了`Comments`组件。\n\n![](assets/react-ssr-demo4.jpg)\n\n由于点击交互优先级最高。React将以同步优先级立刻hydrate该`Comments`组件。\n\n![](assets/react-ssr-demo5.jpg)\n\n由于是同步的，`Comments`组件hydrate结束后，能同步执行事件处理器，从而响应用户交互。\n\n等它们都结束后，重新恢复`SideBar`的Hydration。\n\n原理是**触发点击时，React判断当前组件是否被block，如果block了，则去同步的对该fiber执行Hydration（[代码位置](https://github.com/facebook/react/blob/d66fa02a303fc53d901bdb0d7bbdaec3e6774b19/packages/react-dom-bindings/src/events/ReactDOMEventListener.js#L194)），等执行结束，再去实际的调用event回调。**\n\n> 水合过程是从HostRoot根组件、以及Suspense组件开始，它的粒度也是把这两类组件作为整体。即如果`Suspense`组件下的`Comments`组件的第一个Comment被点击，那么这个`Suspense`整体都会同步Hydration，而不是只水合第一个Comment。\n\n### 全文总结\n\n本文写的很长，从老的SSR原理、实现、存在的问题，讲到新SSR特性的原理、功能和解决的问题。讲得很多，可能需要一段时间才能消化。\n\n最后再总结一下两个SSR主要特性：\n\n- **流式HTML**：让你可以尽早的发送一些html到客户端，并在其他耗时的内容准备ok后，再次发送到客户端，从而更快速、平滑的显示内容。\n\n- **选择性水合**：让你尽可能早的水合已经准备好的内容，使其可交互。并在其他内容准备好后立即水合。并且支持优先水合正在交互的部分。\n\n再回顾一下React老SSR解决不了的三个问题，在新SSR特性下，是如何被解决的：\n\n- **必须获取所有数据，才能显示内容**\n\n    流式HTML的出现，让我们不再需要等待所有数据获取。\n\n- **必须加载所有js，才能开始水合**\n\n    水合不再需要所有js加载完成，所以我们可以使用代码分包，让较大的js块从初始的bundle分离出去，从而让水合更快开始。\n\n- **必须完成整个水合过程，页面才能交互**\n\n    水合不再是整体进行，而是可以部分完成。水合完成的部分可以交互。未完成的部分，如果用户与其交互，React会以最高优先级，立刻让其完成水合，并立刻响应交互。所以用户感觉它就是瞬间完成的。\n\n可以试想下，老SSR的顺序串行，且相互依赖的**fetch data => SSR => load js => Hydration**低效运行模式，在新SSR特性下，转变为**并行、异步、流式渲染**的高效运行模式下，性能会有多大的提升。让我们拭目以待吧！\n\n> 本文未介绍到的相关内容包括以下几部分，后续可能考虑单独出一些文章来介绍。<br />\n- renderToPipeableStream的实现原理<br />\n- Suspense的原理及其它特性<br />\n- 客户端Hydration的原理<br />\n"}}},"pageContext":{"slug":"/react-ssr","nexttitle":"谈一谈React18的批处理","nextslug":"/react-batch","prevtitle":"谈一谈React18的RSC","prevslug":"/react-rsc","relatedPosts":[{"title":"谈一谈React18的RSC","description":"介绍React18的RSC相关知识，参考：https://article.juejin.cn/post/7220061751399170103#heading-13和https://dev.to/jankoritak/server-components-vs-ssr-1g8c","coverImg":{"layout":"constrained","placeholder":{"fallback":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAGAABAAMBAAAAAAAAAAAAAAAAAAECAwX/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAAB59M1QD//xAAYEAADAQEAAAAAAAAAAAAAAAABAgMQEf/aAAgBAQABBQJZlohd6c//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAZEAADAAMAAAAAAAAAAAAAAAACEBEAITH/2gAIAQEABj8CI9Qcr6v/xAAcEAACAgIDAAAAAAAAAAAAAAABEQAxECFBYZH/2gAIAQEAAT8hGHcRbc1cg1RhuMqzOx7j/9oADAMBAAIAAwAAABDTD//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABwQAQACAwADAAAAAAAAAAAAAAERIQAxQRBRcf/aAAgBAQABPxABABrExqK7gpaQYrcWa+ZsgC9GAIAPQ5o4slvH/9k="},"backgroundColor":"transparent","images":{"fallback":{"src":"/leon-blog/static/6890535e3478882b78f0403eb486168d/4710f/react-rsc-cover.jpg","srcSet":"/leon-blog/static/6890535e3478882b78f0403eb486168d/002be/react-rsc-cover.jpg 165w,\n/leon-blog/static/6890535e3478882b78f0403eb486168d/b4f54/react-rsc-cover.jpg 330w,\n/leon-blog/static/6890535e3478882b78f0403eb486168d/4710f/react-rsc-cover.jpg 659w,\n/leon-blog/static/6890535e3478882b78f0403eb486168d/eeb57/react-rsc-cover.jpg 1318w","sizes":"(min-width: 659px) 659px, 100vw"},"sources":[{"srcSet":"/leon-blog/static/6890535e3478882b78f0403eb486168d/79731/react-rsc-cover.avif 165w,\n/leon-blog/static/6890535e3478882b78f0403eb486168d/6ae0f/react-rsc-cover.avif 330w,\n/leon-blog/static/6890535e3478882b78f0403eb486168d/b9b98/react-rsc-cover.avif 659w,\n/leon-blog/static/6890535e3478882b78f0403eb486168d/4ddb9/react-rsc-cover.avif 1318w","type":"image/avif","sizes":"(min-width: 659px) 659px, 100vw"},{"srcSet":"/leon-blog/static/6890535e3478882b78f0403eb486168d/55a9a/react-rsc-cover.webp 165w,\n/leon-blog/static/6890535e3478882b78f0403eb486168d/39687/react-rsc-cover.webp 330w,\n/leon-blog/static/6890535e3478882b78f0403eb486168d/62d22/react-rsc-cover.webp 659w,\n/leon-blog/static/6890535e3478882b78f0403eb486168d/6c1b1/react-rsc-cover.webp 1318w","type":"image/webp","sizes":"(min-width: 659px) 659px, 100vw"}]},"width":659,"height":368},"coverImageAlt":"封面","datePublished":"2024-10-15T19:32:24.000Z","dateModified":"2024-10-15T19:32:24.000Z","category":"经验总结","tags":["前端","React","架构","造轮子","Next"],"excerpt":"最近笔者腾出了大把的时间，学习了一下React18。 导航 什么是RSC 客户端组件的缺点 服务器组件如何解决问题 使用RSC RSC的缺点 总结一：RSC和RCC RSC对比SSR Next.js下RSC的工作流程 总结二：RSC和SSR 其它 什么是RSC React1…","timeToRead":2,"slug":"/react-rsc","route":"/react-rsc","pathName":"/leon-blog/react-rsc","url":"https://missmess.github.io/leon-blog/react-rsc"},{"title":"谈一谈React18的批处理","description":"介绍React18的并发和批处理相关知识","coverImg":{"layout":"constrained","placeholder":{"fallback":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAECAwX/xAAWAQEBAQAAAAAAAAAAAAAAAAADAAL/2gAMAwEAAhADEAAAAeclkhySZv/EABkQAQACAwAAAAAAAAAAAAAAAAERMQACEv/aAAgBAQABBQKWBOm2trz/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAZEAACAwEAAAAAAAAAAAAAAAAAECEiUYH/2gAIAQEABj8CLYQuL//EABsQAAICAwEAAAAAAAAAAAAAAAABETEQIUFx/9oACAEBAAE/IWxdkFYRnwUFXjH/2gAMAwEAAgADAAAAEKP/AP/EABcRAQADAAAAAAAAAAAAAAAAAAEQESH/2gAIAQMBAT8QS8j/xAAWEQADAAAAAAAAAAAAAAAAAAABECH/2gAIAQIBAT8QMX//xAAcEAEAAwACAwAAAAAAAAAAAAABABEhMUFRYfD/2gAIAQEAAT8Q4Q5WAQPCaL9qy5y7yEGo6n2PEtn/2Q=="},"backgroundColor":"transparent","images":{"fallback":{"src":"/leon-blog/static/b1d2ff9419b4177e3d87c06130565a38/56675/react18-feature.jpg","srcSet":"/leon-blog/static/b1d2ff9419b4177e3d87c06130565a38/9fa5a/react18-feature.jpg 184w,\n/leon-blog/static/b1d2ff9419b4177e3d87c06130565a38/2a971/react18-feature.jpg 367w,\n/leon-blog/static/b1d2ff9419b4177e3d87c06130565a38/56675/react18-feature.jpg 734w","sizes":"(min-width: 734px) 734px, 100vw"},"sources":[{"srcSet":"/leon-blog/static/b1d2ff9419b4177e3d87c06130565a38/9d028/react18-feature.avif 184w,\n/leon-blog/static/b1d2ff9419b4177e3d87c06130565a38/fcbd2/react18-feature.avif 367w,\n/leon-blog/static/b1d2ff9419b4177e3d87c06130565a38/61ef5/react18-feature.avif 734w","type":"image/avif","sizes":"(min-width: 734px) 734px, 100vw"},{"srcSet":"/leon-blog/static/b1d2ff9419b4177e3d87c06130565a38/ef27d/react18-feature.webp 184w,\n/leon-blog/static/b1d2ff9419b4177e3d87c06130565a38/6963a/react18-feature.webp 367w,\n/leon-blog/static/b1d2ff9419b4177e3d87c06130565a38/bce1f/react18-feature.webp 734w","type":"image/webp","sizes":"(min-width: 734px) 734px, 100vw"}]},"width":734,"height":368},"coverImageAlt":"封面","datePublished":"2024-06-24T19:28:20.000Z","dateModified":"2024-06-24T19:28:20.000Z","category":"经验总结","tags":["前端","React","架构","造轮子"],"excerpt":"最近笔者腾出了大把的时间，学习了一下React18。 导航 什么是批处理？ React18之前的批处理 React18的自动批处理 批处理原理 退出批处理 回首React过往的一些重大版本： React 16.0（2017年9月）：带来了全新的Fiber…","timeToRead":1,"slug":"/react-batch","route":"/react-batch","pathName":"/leon-blog/react-batch","url":"https://missmess.github.io/leon-blog/react-batch"}]}},"staticQueryHashes":["2792541146","2845918323"]}